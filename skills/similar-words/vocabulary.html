<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>INTUITY - Word Choice Quiz</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Space+Grotesk:wght@600;700;800&display=swap" rel="stylesheet">
  <style>
    /* ORIGINAL DESIGN PRESERVED EXACTLY */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
      min-height: 100vh;
      color: #f1f5f9;
      padding: 1rem;
      line-height: 1.6;
    }
    .container { max-width: 900px; margin: 0 auto; }
    .back-btn { display:inline-flex;align-items:center;gap:.5rem;color:#94a3b8;background:none;border:none;font-size:.875rem;cursor:pointer;margin-bottom:1rem;padding:.5rem 0;transition:color .2s; }
    .back-btn:hover { color:#cbd5e1; }
    .header { text-align:center; margin-bottom:1.25rem; }
    .logo { font-family:'Space Grotesk',sans-serif;font-size:2.5rem;font-weight:800;color:rgba(255,107,53,.9);letter-spacing:-.03em;margin-bottom:.25rem; }
    .subtitle { font-size:.8125rem;color:#94a3b8;margin-bottom:.125rem; }
    .author { font-size:.6875rem;color:#64748b; }
    .info-bar{text-align:center;color:#94a3b8;font-size:.8125rem;margin-bottom:1rem;font-weight:500;}
    .word-bank{display:flex;justify-content:center;gap:.375rem;margin-bottom:1rem;flex-wrap:wrap;max-width:100%;min-height:40px;position:sticky;top:0;background:linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);padding:1rem 0;z-index:10;border-bottom:1px solid rgba(71,85,105,.2);}
    .word-chip{background:rgba(255,107,53,.15);border:1px solid rgba(255,107,53,.3);color:rgba(255,107,53,.9);padding:.375rem .75rem;border-radius:.375rem;font-weight:600;font-size:.8125rem;transition:.2s;white-space:nowrap;cursor:pointer;user-select:none;}
    .word-chip.used{background:rgba(71,85,105,.3);border-color:rgba(71,85,105,.5);color:#64748b;text-decoration:line-through;cursor:not-allowed;}
    .word-chip.dragging{opacity:0.5;transform:scale(1.05);}
    .word-chip:hover:not(.used){transform:scale(1.05);background:rgba(255,107,53,.25);}
    .quiz-box{background:rgba(30,41,59,.6);backdrop-filter:blur(20px);border:1px solid rgba(71,85,105,.5);border-radius:1rem;padding:1rem;box-shadow:0 20px 25px -5px rgba(0,0,0,.5);}
    .question{background:rgba(15,23,42,.5);border:1px solid rgba(71,85,105,.3);border-radius:.625rem;margin-bottom:.625rem;overflow:hidden;transition:.3s;}
    .question-header{display:flex;align-items:center;gap:.75rem;padding:.75rem;}
    .question-num{width:1.75rem;height:1.75rem;border-radius:50%;background:rgba(255,107,53,.8);color:white;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.8125rem;flex-shrink:0;}
    .question-num.answered{background:#3b82f6;}
    .question-num.correct{background:#10b981;}
    .question-num.incorrect{background:#f59e0b;}
    .question-text{flex:1;font-size:.875rem;line-height:1.5;}
    .blank{display:inline-block;min-width:70px;padding:.125rem .5rem;background:rgba(71,85,105,.4);border:1px solid rgba(71,85,105,.5);border-radius:.25rem;margin:0 .25rem;color:#94a3b8;font-weight:600;text-align:center;font-size:.8125rem;cursor:pointer;transition:all .2s;}
    .blank.filled{background:rgba(59,130,246,.2);border-color:rgba(59,130,246,.5);color:#60a5fa;}
    .blank.correct{background:rgba(16,185,129,.25);border-color:rgba(16,185,129,.6);color:#10b981;box-shadow:0 0 0 2px rgba(16,185,129,.2);}
    .blank.incorrect{background:rgba(249,115,22,.25);border-color:rgba(249,115,22,.6);color:#f97316;box-shadow:0 0 0 2px rgba(249,115,22,.2);}
    .blank.active{outline:2px solid rgba(255,107,53,.9);outline-offset:2px;}
    .blank.drag-over{transform:scale(1.05);background:rgba(255,107,53,.2);border-color:rgba(255,107,53,.5);}
    .controls{display:flex;justify-content:center;gap:.5rem;margin-top:1.25rem;flex-wrap:wrap;}
    .control-btn{padding:.5rem 1.25rem;border:none;background:rgba(255,107,53,.15);color:rgba(255,107,53,.9);border-radius:.375rem;cursor:pointer;font-size:.8125rem;font-weight:600;transition:.2s;font-family:'Inter',sans-serif;white-space:nowrap;}
    .control-btn:hover{background:rgba(255,107,53,.25);transform:translateY(-1px);}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:1000;padding:1rem;}
    .modal.active{display:flex;}
    .modal-content{background:#1e293b;border:1px solid rgba(71,85,105,.5);border-radius:1rem;padding:1.5rem;max-width:400px;width:100%;text-align:center;}
    .modal-title{font-size:1.375rem;font-weight:700;color:rgba(255,107,53,.9);margin-bottom:1rem;}
    .modal-stats{margin:1.25rem 0;font-size:1rem;color:#cbd5e1;}
    .modal-stat{margin:.375rem 0;}
    .modal-close{padding:.625rem 1.75rem;border:none;background:rgba(255,107,53,.2);color:rgba(255,107,53,.9);border-radius:.5rem;cursor:pointer;font-size:.9375rem;font-weight:600;margin-top:.75rem;font-family:'Inter',sans-serif;}
    .modal-close:hover{background:rgba(255,107,53,.3);}
  </style>
</head>
<body>
  <div class="container">
    <button class="back-btn" onclick="goBack()">‚Üê Back to Menu</button>
    <div class="header">
      <div class="logo">INTUITY</div>
      <div class="subtitle">Word Choice Quiz - B2 Level</div>
      <div class="author">by Majid Nashtai</div>
    </div>
    
    <div class="info-bar" id="infoBar">Set 1 of 3 ‚Ä¢ Click a blank, then click a word</div>
    <div class="word-bank" id="wordBank"></div>
    
    <div class="quiz-box" id="quizContainer"></div>
    
    <div class="controls">
      <button class="control-btn" onclick="checkAnswers()">Check Answers</button>
      <button class="control-btn" onclick="showResults()">Show Score</button>
      <button class="control-btn" onclick="resetQuiz()">Reset Quiz</button>
    </div>
  </div>
  
  <div class="modal" id="resultsModal">
    <div class="modal-content">
      <div class="modal-title">Quiz Results</div>
      <div class="modal-stats" id="resultsContent"></div>
      <button class="modal-close" onclick="closeModal()">Close</button>
    </div>
  </div>
  
  <script>
    // SIMPLE GLOBAL STATE
    let currentSet = 0;
    let activeBlank = null;
    let userAnswers = {};
    let isChecked = false;
    
    // SIMPLE QUIZ DATA
    const quizData = {
      sets: [
        {
          words: ["however", "moreover", "therefore", "although", "nevertheless"],
          sentences: [
            { text: "The weather was terrible, _____ we decided to go hiking.", correct: 0 },
            { text: "She studied hard _____ she failed the exam.", correct: 3 },
            { text: "He was tired; _____, he continued working.", correct: 4 }
          ]
        },
        {
          words: ["beautiful", "gorgeous", "stunning", "attractive", "pretty"],
          sentences: [
            { text: "The sunset was absolutely _____.", correct: 2 },
            { text: "She wore a _____ dress to the party.", correct: 0 },
            { text: "The garden looks _____ in spring.", correct: 4 }
          ]
        },
        {
          words: ["quickly", "rapidly", "swiftly", "fast", "speedily"],
          sentences: [
            { text: "The car moved _____ down the highway.", correct: 3 },
            { text: "She _____ finished her homework.", correct: 0 },
            { text: "The river flows _____ after the rain.", correct: 1 }
          ]
        }
      ]
    };

    // INITIALIZE
    function init() {
      console.log('üöÄ Starting quiz...');
      loadSet(0);
    }

    // LOAD A SET
    function loadSet(setIndex) {
      currentSet = setIndex;
      const set = quizData.sets[setIndex];
      
      // Clear previous
      document.getElementById('wordBank').innerHTML = '';
      document.getElementById('quizContainer').innerHTML = '';
      
      // Create word bank
      set.words.forEach((word, index) => {
        const chip = document.createElement('div');
        chip.className = 'word-chip';
        chip.textContent = word;
        chip.onclick = () => selectWord(index);
        document.getElementById('wordBank').appendChild(chip);
      });
      
      // Create questions
      set.sentences.forEach((sentence, index) => {
        const questionDiv = document.createElement('div');
        questionDiv.className = 'question';
        
        const parts = sentence.text.split('_____');
        
        questionDiv.innerHTML = `
          <div class="question-header">
            <div class="question-num" id="badge-${index}">${index + 1}</div>
            <div class="question-text">
              ${parts[0]}<span class="blank" id="blank-${index}" onclick="selectBlank(${index})">${userAnswers[index] !== undefined ? set.words[userAnswers[index]] : '_____'}</span>${parts[1] || ''}
            </div>
          </div>
        `;
        
        document.getElementById('quizContainer').appendChild(questionDiv);
      });
      
      updateInfoBar();
      console.log('‚úÖ Set loaded:', setIndex);
    }

    // SELECT A BLANK
    function selectBlank(index) {
      console.log('üéØ Blank selected:', index);
      
      // Remove previous active
      document.querySelectorAll('.blank').forEach(b => b.classList.remove('active'));
      
      // Set new active
      activeBlank = index;
      document.getElementById(`blank-${index}`).classList.add('active');
      
      // Update word bank to show available words
      updateWordBank();
    }

    // SELECT A WORD
    function selectWord(wordIndex) {
      console.log('üéØ Word selected:', wordIndex, quizData.sets[currentSet].words[wordIndex]);
      
      if (activeBlank === null) {
        alert('Please select a blank first!');
        return;
      }
      
      // Fill the blank
      userAnswers[activeBlank] = wordIndex;
      const blank = document.getElementById(`blank-${activeBlank}`);
      const badge = document.getElementById(`badge-${activeBlank}`);
      
      blank.textContent = quizData.sets[currentSet].words[wordIndex];
      blank.classList.add('filled');
      blank.classList.remove('active');
      badge.classList.add('answered');
      
      // Clear active blank
      activeBlank = null;
      
      // Update word bank
      updateWordBank();
      updateInfoBar();
      
      console.log('‚úÖ Answer recorded:', userAnswers);
    }

    // UPDATE WORD BANK
    function updateWordBank() {
      const words = document.querySelectorAll('.word-chip');
      const usedWords = Object.values(userAnswers);
      
      words.forEach((word, index) => {
        if (usedWords.includes(index)) {
          word.classList.add('used');
        } else {
          word.classList.remove('used');
        }
      });
    }

    // UPDATE INFO BAR
    function updateInfoBar() {
      const answered = Object.keys(userAnswers).length;
      const total = quizData.sets[currentSet].sentences.length;
      document.getElementById('infoBar').textContent = 
        `Set ${currentSet + 1} of ${quizData.sets.length} ‚Ä¢ ${answered}/${total} answered ‚Ä¢ Click a blank, then click a word`;
    }

    // CHECK ANSWERS
    function checkAnswers() {
      console.log('üîç Checking answers...');
      isChecked = true;
      const set = quizData.sets[currentSet];
      
      Object.keys(userAnswers).forEach(questionIndex => {
        const userAnswer = userAnswers[questionIndex];
        const correctAnswer = set.sentences[questionIndex].correct;
        const blank = document.getElementById(`blank-${questionIndex}`);
        const badge = document.getElementById(`badge-${questionIndex}`);
        
        if (userAnswer === correctAnswer) {
          blank.classList.add('correct');
          badge.classList.add('correct');
          console.log('‚úÖ Question', questionIndex, 'correct');
        } else {
          blank.classList.add('incorrect');
          badge.classList.add('incorrect');
          console.log('‚ùå Question', questionIndex, 'incorrect');
        }
      });
    }

    // SHOW RESULTS
    function showResults() {
      if (!isChecked) {
        alert('Please check your answers first!');
        return;
      }
      
      const set = quizData.sets[currentSet];
      let correct = 0;
      let total = 0;
      
      Object.keys(userAnswers).forEach(questionIndex => {
        total++;
        if (userAnswers[questionIndex] === set.sentences[questionIndex].correct) {
          correct++;
        }
      });
      
      const percentage = total > 0 ? Math.round((correct / total) * 100) : 0;
      
      document.getElementById('resultsContent').innerHTML = `
        <div class="modal-stat"><strong>Set:</strong> ${currentSet + 1}</div>
        <div class="modal-stat"><strong>Answered:</strong> ${total}/${set.sentences.length}</div>
        <div class="modal-stat"><strong>Correct:</strong> ${correct}</div>
        <div class="modal-stat"><strong>Score:</strong> ${percentage}%</div>
      `;
      
      document.getElementById('resultsModal').classList.add('active');
    }

    // RESET QUIZ
    function resetQuiz() {
      userAnswers = {};
      activeBlank = null;
      isChecked = false;
      loadSet(currentSet);
    }

    // CLOSE MODAL
    function closeModal() {
      document.getElementById('resultsModal').classList.remove('active');
    }

    // GO BACK
    function goBack() {
      window.location.href = '../similar-words.html';
    }

    // START
    window.onload = init;
  </script>
</body>
</html>
