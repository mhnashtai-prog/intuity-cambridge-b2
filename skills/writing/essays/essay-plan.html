<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>Essay Plan â€” INTUITY</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet"/>
<style>

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:        #0c0c0c;
  --gold:      #C9A961;
  --gold-d:    #9B7D3A;
  --gold-l:    #E8D4A0;
  --white:     #FAFAF8;
  --ink:       #0d0d0d;
  --ink-2:     rgba(13,13,13,0.65);
  --ink-3:     rgba(13,13,13,0.35);
  --rule:      rgba(0,0,0,0.07);

  /* Paragraph accent colours â€” one per slot */
  --c0: #1A1A2E;   /* intro    â€” deep navy   */
  --c1: #2D4A3E;   /* body 1   â€” forest      */
  --c2: #3D2B1F;   /* body 2   â€” espresso    */
  --c3: #2B2040;   /* body 3   â€” aubergine   */
  --c4: #1A1A1A;   /* concl    â€” near-black  */
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*, *::before, *::after {
  margin: 0; padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}
html, body {
  width: 100%; height: 100%;
  overflow: hidden; position: fixed;
  background: var(--bg);
  font-family: 'Inter', sans-serif;
  -webkit-font-smoothing: antialiased;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHELL + CARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.shell {
  position: fixed; inset: 0;
  display: flex; align-items: center; justify-content: center;
  padding: 2vh 3vw;
}
.card {
  width: 100%; height: 100%;
  max-width: 900px; max-height: 95vh;
  background: var(--white);
  border-radius: 1.5rem;
  box-shadow:
    0 0 0 1px rgba(201,169,97,0.15),
    0 24px 80px rgba(0,0,0,0.65),
    0 4px 16px rgba(0,0,0,0.4);
  display: flex; flex-direction: column;
  overflow: hidden; position: relative;
}
.card::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 3px;
  background: linear-gradient(90deg, var(--gold-d), var(--gold-l), var(--gold-d));
  z-index: 5;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card-brand {
  flex-shrink: 0;
  display: flex; align-items: center; justify-content: space-between;
  padding: 1rem 1.5rem 0.75rem;
  margin-top: 3px;
  border-bottom: 1px solid var(--rule);
  position: relative; z-index: 10;
}
.home-link {
  text-decoration: none;
  font-size: 1rem; font-weight: 600; color: var(--gold);
  padding: 0.4rem 0.6rem; border-radius: 0.5rem;
  transition: all 0.2s;
}
.home-link:hover  { background: rgba(201,169,97,0.1); color: var(--gold-d); }
.home-link:active { transform: scale(0.95); }
.brand-word {
  position: absolute; left: 50%; transform: translateX(-50%);
  font-size: 0.65rem; font-weight: 800;
  letter-spacing: 0.22em; text-transform: uppercase;
  color: rgba(0,0,0,0.18); pointer-events: none;
}
.menu-btn {
  background: #000; border: none;
  width: 32px; height: 32px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; transition: all 0.2s;
}
.menu-btn:hover  { background: rgba(0,0,0,0.8); }
.menu-btn:active { transform: scale(0.95); }
.menu-dots { display: flex; gap: 4px; }
.menu-dots span { width: 4px; height: 4px; border-radius: 50%; background: #fff; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUESTION STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.q-strip {
  flex-shrink: 0;
  padding: 0.875rem 1.5rem;
  border-bottom: 1px solid var(--rule);
  background: var(--ink);
  display: flex; align-items: flex-start; gap: 0.875rem;
}
.q-label {
  font-size: 0.55rem; font-weight: 800;
  text-transform: uppercase; letter-spacing: 0.14em;
  color: var(--gold); white-space: nowrap;
  margin-top: 0.15rem; flex-shrink: 0;
}
.q-text {
  font-family: 'DM Serif Display', serif;
  font-size: 0.95rem; line-height: 1.5;
  color: rgba(255,255,255,0.9);
  font-style: italic;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PLAN CANVAS â€” scrollable
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.plan-canvas {
  flex: 1; min-height: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding: 1.25rem 1.25rem 1rem;
  display: flex; flex-direction: column; gap: 0.75rem;
}
.plan-canvas::-webkit-scrollbar { width: 4px; }
.plan-canvas::-webkit-scrollbar-track { background: transparent; }
.plan-canvas::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.1); border-radius: 2px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BLUEPRINT CARD â€” one per paragraph
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.bp-card {
  display: flex;
  border-radius: 0.875rem;
  overflow: hidden;
  background: #fff;
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.06),
    0 2px 8px rgba(0,0,0,0.05);
  /* staggered entrance */
  opacity: 0;
  transform: translateY(12px);
  animation: cardIn 0.4s cubic-bezier(0.4,0,0.2,1) forwards;
}
.bp-card:nth-child(1) { animation-delay: 0.05s; }
.bp-card:nth-child(2) { animation-delay: 0.12s; }
.bp-card:nth-child(3) { animation-delay: 0.19s; }
.bp-card:nth-child(4) { animation-delay: 0.26s; }
.bp-card:nth-child(5) { animation-delay: 0.33s; }
@keyframes cardIn {
  to { opacity: 1; transform: translateY(0); }
}

/* Left colour tab */
.bp-tab {
  width: 5px; flex-shrink: 0;
}
.bp-card:nth-child(1) .bp-tab { background: var(--c0); }
.bp-card:nth-child(2) .bp-tab { background: var(--c1); }
.bp-card:nth-child(3) .bp-tab { background: var(--c2); }
.bp-card:nth-child(4) .bp-tab { background: var(--c3); }
.bp-card:nth-child(5) .bp-tab { background: var(--c4); }

/* Card body */
.bp-body {
  flex: 1; padding: 0.875rem 1rem 0.875rem 0.875rem;
  display: flex; flex-direction: column; gap: 0.625rem;
}

/* Paragraph title */
.bp-title {
  font-size: 0.55rem; font-weight: 800;
  text-transform: uppercase; letter-spacing: 0.16em;
  color: var(--ink-3);
  display: flex; align-items: center; gap: 0.5rem;
}
.bp-card:nth-child(1) .bp-title { color: var(--c0); opacity: 0.7; }
.bp-card:nth-child(2) .bp-title { color: var(--c1); opacity: 0.8; }
.bp-card:nth-child(3) .bp-title { color: var(--c2); opacity: 0.8; }
.bp-card:nth-child(4) .bp-title { color: var(--c3); opacity: 0.8; }
.bp-card:nth-child(5) .bp-title { color: var(--c4); opacity: 0.7; }

/* Divider under title */
.bp-title::after {
  content: '';
  flex: 1; height: 1px;
  background: currentColor;
  opacity: 0.15;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NOTES CLUSTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.bp-notes {
  display: flex; flex-direction: column; gap: 0.375rem;
}

.bp-note {
  display: flex; align-items: flex-start; gap: 0.625rem;
}

/* Marker chip */
.bp-marker {
  flex-shrink: 0;
  font-size: 0.7rem; font-weight: 700;
  color: var(--gold-d);
  min-width: 1.4rem;
  padding-top: 0.05rem;
  font-family: 'DM Sans', sans-serif;
  letter-spacing: -0.01em;
}

/* Main claim â€” first note with ğŸ’¡ or (hook) etc */
.bp-note.anchor .bp-text {
  font-family: 'DM Serif Display', serif;
  font-size: 1.05rem;
  line-height: 1.45;
  color: var(--ink);
  font-style: italic;
}

/* Supporting notes */
.bp-note.support .bp-text {
  font-family: 'DM Sans', sans-serif;
  font-size: 0.82rem;
  line-height: 1.5;
  color: var(--ink-2);
}

/* Verb chip inline */
.verb-chip {
  display: inline-flex; align-items: center;
  background: rgba(201,169,97,0.12);
  color: var(--gold-d);
  font-size: 0.65rem; font-weight: 700;
  padding: 0.1rem 0.4rem; border-radius: 0.25rem;
  margin-left: 0.3rem;
  font-family: 'Inter', sans-serif;
  letter-spacing: 0.03em; text-transform: lowercase;
  vertical-align: middle;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAGIC VERBS STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.magic-strip {
  flex-shrink: 0;
  padding: 0.75rem 1.25rem;
  border-top: 1px solid var(--rule);
  background: rgba(201,169,97,0.04);
  display: flex; align-items: center; gap: 0.625rem;
  flex-wrap: wrap;
}
.magic-label {
  font-size: 0.55rem; font-weight: 800;
  text-transform: uppercase; letter-spacing: 0.14em;
  color: var(--gold-d); white-space: nowrap; flex-shrink: 0;
}
.magic-verbs {
  display: flex; gap: 0.375rem; flex-wrap: wrap;
}
.magic-verb {
  background: var(--gold);
  color: #fff;
  font-size: 0.72rem; font-weight: 700;
  padding: 0.25rem 0.65rem; border-radius: 2rem;
  font-family: 'Inter', sans-serif;
  letter-spacing: 0.02em;
  animation: verbPop 0.35s cubic-bezier(0.34,1.56,0.64,1) both;
}
.magic-verb:nth-child(1) { animation-delay: 0.4s; }
.magic-verb:nth-child(2) { animation-delay: 0.48s; }
.magic-verb:nth-child(3) { animation-delay: 0.56s; }
.magic-verb:nth-child(4) { animation-delay: 0.64s; }
.magic-verb:nth-child(5) { animation-delay: 0.72s; }
@keyframes verbPop {
  from { opacity: 0; transform: scale(0.7); }
  to   { opacity: 1; transform: scale(1); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER PILLS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card-nav {
  flex-shrink: 0;
  display: flex; justify-content: center;
  padding: 0.75rem 1.125rem calc(env(safe-area-inset-bottom,0px) + 0.875rem);
  border-top: 1px solid var(--rule);
  background: var(--white);
}
.nav-pill {
  display: flex; gap: 0.15rem;
  background: rgba(10,10,10,0.06);
  border-radius: 2rem; padding: 0.35rem 0.4rem;
}
.nb {
  background: transparent; border: none;
  padding: 0.5rem 1rem; border-radius: 1.5rem;
  font-family: 'Inter', sans-serif;
  font-size: 0.7rem; letter-spacing: 0.02em;
  color: rgba(0,0,0,0.28);
  cursor: pointer; transition: all 0.24s cubic-bezier(0.4,0,0.2,1);
  white-space: nowrap; min-height: 36px; font-weight: 500;
}
.nb.on { background: var(--ink); color: var(--gold); font-weight: 700; }
.nb:hover:not(.on) { color: rgba(0,0,0,0.5); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE MESSAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.state-msg {
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  height: 100%; gap: 0.75rem;
  font-size: 0.9rem; color: rgba(0,0,0,0.3);
  text-align: center; line-height: 1.6; padding: 2rem;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE â€” MOBILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 768px) {
  .shell { padding: 1vh 2vw; }
  .card  { border-radius: 1rem; }
  .card-brand { padding: 0.75rem 1rem 0.5rem; }
  .brand-word { font-size: 0.55rem; }
  .q-strip { padding: 0.75rem 1rem; gap: 0.625rem; }
  .q-text  { font-size: 0.88rem; }
  .plan-canvas { padding: 1rem 0.875rem; gap: 0.625rem; }
  .bp-body { padding: 0.75rem 0.875rem 0.75rem 0.75rem; }
  .bp-note.anchor .bp-text { font-size: 0.95rem; }
  .bp-note.support .bp-text { font-size: 0.78rem; }
  .nb { padding: 0.4rem 0.75rem; font-size: 0.65rem; min-height: 32px; }
  .magic-strip { padding: 0.625rem 1rem; }
}
@media (max-width: 400px) {
  .plan-canvas { padding: 0.875rem 0.75rem; gap: 0.5rem; }
  .bp-note.anchor .bp-text { font-size: 0.9rem; }
  .nb { padding: 0.35rem 0.6rem; font-size: 0.6rem; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE â€” PROJECTOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (min-width: 1400px) {
  .card { max-width: 1200px; }
  .q-text { font-size: 1.25rem; line-height: 1.6; }
  .plan-canvas { padding: 1.75rem 2rem; gap: 1rem; }
  .bp-body { padding: 1.125rem 1.25rem; gap: 0.75rem; }
  .bp-title { font-size: 0.65rem; }
  .bp-note.anchor .bp-text { font-size: 1.35rem; }
  .bp-note.support .bp-text { font-size: 1rem; }
  .bp-marker { font-size: 0.9rem; min-width: 1.75rem; }
  .magic-verb { font-size: 0.9rem; padding: 0.35rem 0.85rem; }
  .magic-label { font-size: 0.65rem; }
  .nb { font-size: 0.8rem; padding: 0.6rem 1.25rem; min-height: 42px; }
}

</style>
</head>
<body>

<div class="shell">
<div class="card">

  <!-- HEADER -->
  <div class="card-brand">
    <a href="essay-question-selector.html" class="home-link">â† Questions</a>
    <span class="brand-word">INTUITY</span>
    <div style="flex:1"></div>
    <div class="menu-btn" id="menuBtn">
      <div class="menu-dots"><span></span><span></span><span></span></div>
    </div>
  </div>

  <!-- QUESTION STRIP -->
  <div class="q-strip" id="qStrip" style="display:none">
    <span class="q-label">Question</span>
    <span class="q-text" id="qText"></span>
  </div>

  <!-- PLAN CANVAS -->
  <div class="plan-canvas" id="planCanvas">
    <div class="state-msg">Loading planâ€¦</div>
  </div>

  <!-- MAGIC VERBS -->
  <div class="magic-strip" id="magicStrip" style="display:none">
    <span class="magic-label">Key verbs</span>
    <div class="magic-verbs" id="magicVerbs"></div>
  </div>

  <!-- FOOTER -->
  <div class="card-nav">
    <div class="nav-pill">
      <button class="nb"    onclick="navTo('question')">question</button>
      <button class="nb on" onclick="navTo('plan')">plan</button>
      <button class="nb"    onclick="navTo('model')">model</button>
      <button class="nb"    onclick="navTo('build')">build</button>
      <button class="nb"    onclick="navTo('sample')">sample</button>
    </div>
  </div>

</div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let question = null;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MARKER CLASSIFICATION
   anchor = main claim (shown large + italic)
   support = development note
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const ANCHOR_MARKERS = ['ğŸ’¡', '(hook)', '(stance)', '(belief)', '(context)', 'âœ“', 'ğŸ“'];

function isAnchor(marker) {
  return ANCHOR_MARKERS.some(a => marker && marker.startsWith(a.replace(/[()]/g,''))) ||
         ANCHOR_MARKERS.includes(marker);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER PLAN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderPlan(essay) {
  const canvas = document.getElementById('planCanvas');
  canvas.innerHTML = '';

  // Question strip
  if (essay.question) {
    const strip = document.getElementById('qStrip');
    document.getElementById('qText').textContent = essay.question;
    strip.style.display = 'flex';
  }

  // Blueprint cards â€” one per skeleton paragraph
  (essay.skeleton || []).forEach(para => {
    const card = document.createElement('div');
    card.className = 'bp-card';

    // Colour tab
    const tab = document.createElement('div');
    tab.className = 'bp-tab';

    // Body
    const body = document.createElement('div');
    body.className = 'bp-body';

    // Title
    const title = document.createElement('div');
    title.className = 'bp-title';
    title.textContent = para.title || '';
    body.appendChild(title);

    // Notes cluster
    const notesEl = document.createElement('div');
    notesEl.className = 'bp-notes';

    (para.notes || []).forEach((note, ni) => {
      const noteEl = document.createElement('div');
      // First note in paragraph is anchor; also check marker
      const anchor = ni === 0 || isAnchor(note.marker);
      noteEl.className = `bp-note ${anchor ? 'anchor' : 'support'}`;

      // Marker
      const markerEl = document.createElement('div');
      markerEl.className = 'bp-marker';
      markerEl.textContent = note.marker || '';

      // Text + optional verb chip
      const textEl = document.createElement('div');
      textEl.className = 'bp-text';
      textEl.textContent = note.text || '';

      if (note.verb) {
        const chip = document.createElement('span');
        chip.className = 'verb-chip';
        chip.textContent = note.verb;
        textEl.appendChild(chip);
      }

      noteEl.appendChild(markerEl);
      noteEl.appendChild(textEl);
      notesEl.appendChild(noteEl);
    });

    body.appendChild(notesEl);
    card.appendChild(tab);
    card.appendChild(body);
    canvas.appendChild(card);
  });

  // Magic verbs strip
  const verbs = essay.magic_verbs || [];
  if (verbs.length) {
    const strip  = document.getElementById('magicStrip');
    const verbEl = document.getElementById('magicVerbs');
    verbEl.innerHTML = '';
    verbs.forEach(v => {
      const pill = document.createElement('span');
      pill.className = 'magic-verb';
      pill.textContent = v;
      verbEl.appendChild(pill);
    });
    strip.style.display = 'flex';
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function navTo(dest) {
  if (dest === 'plan') return;  // already here
  if (question) sessionStorage.setItem('currentQuestion', JSON.stringify(question));
  const map = {
    question: 'essay-question-selector.html',
    model:    'essay-builder.html',
    build:    'essay-builder-interactive.html',
    sample:   'essay-master.html'
  };
  if (map[dest]) window.location.href = map[dest];
}

/* navTo is the equivalent of switchMode in essay-question-selector.html
   All five stages share the same map:
     question â†’ essay-question-selector.html
     plan     â†’ essay-plan.html              (here â€” no navigation)
     model    â†’ essay-builder.html
     build    â†’ essay-builder-interactive.html
     sample   â†’ essay-master.html
*/

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function init() {
  try {
    question = JSON.parse(sessionStorage.getItem('currentQuestion'));
  } catch(e) { question = null; }

  if (!question) {
    document.getElementById('planCanvas').innerHTML =
      `<div class="state-msg">No question selected.<br>Return to Questions to choose one.</div>`;
    return;
  }

  try {
    const res  = await fetch('data/ideas.json');
    if (!res.ok) throw new Error('ideas.json not found');
    const data = await res.json();

    // Support both flat and nested structures
    const pool = data.opinion || data.essays || data;
    const essay = Array.isArray(pool)
      ? pool.find(e => e.id === question.id)
      : pool[question.id];

    if (!essay) {
      document.getElementById('planCanvas').innerHTML =
        `<div class="state-msg">No plan for this question yet.<br>
         <small style="opacity:0.35;margin-top:0.5rem;display:block;">id: ${question.id}</small></div>`;
      return;
    }

    renderPlan(essay);

  } catch(err) {
    document.getElementById('planCanvas').innerHTML =
      `<div class="state-msg">Could not load ideas.json<br>
       <small style="opacity:0.35;margin-top:0.5rem;display:block;">${err.message}</small></div>`;
  }
}

init();
</script>
</body>
</html>
