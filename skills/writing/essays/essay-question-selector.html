<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>INTUITY - Essay Question Selector</title>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    body {
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #0d0d0d;
      background-image: radial-gradient(circle at 20% 50%, rgba(201, 169, 97, 0.04) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(201, 169, 97, 0.03) 0%, transparent 50%);
      color: #e5e5e7;
      min-height: 100vh;
      position: relative;
      -webkit-font-smoothing: antialiased;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' /%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.01'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 1;
    }

    .container {
      position: relative;
      z-index: 2;
      max-width: 62rem;
      margin: 0 auto;
      padding: 0.5rem;
    }

    /* UNIFIED HEADER */
    .global-header {
      background: rgba(28, 28, 30, 0.95);
      backdrop-filter: blur(40px) saturate(180%);
      -webkit-backdrop-filter: blur(40px) saturate(180%);
      border-bottom: 1px solid rgba(84, 84, 88, 0.3);
      padding: 0.75rem 1.5rem;
      margin-bottom: 1rem;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    
    .header-row-main {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
    }
    
    .brand {
      display: flex;
      align-items: baseline;
      gap: 0.5rem;
    }
    
    .brand-logo {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.4rem;
      font-weight: 700;
      background: linear-gradient(135deg, #C9A961 0%, rgba(255,255,255,0.85) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-transform: uppercase;
      letter-spacing: -0.04em;
    }
    
    .brand-subtitle {
      font-size: 0.7rem;
      color: #636366;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    
    .home-link {
      color: #8e8e93;
      text-decoration: none;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 0.4rem 0.75rem;
      border-radius: 0.5rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .home-link:hover {
      color: #C9A961;
      background: rgba(201, 169, 97, 0.1);
    }
    
    /* Mode tabs */
    .mode-tabs {
      display: flex;
      gap: 0.25rem;
      padding: 0.25rem;
      border-radius: 0.625rem;
    }
    
    .tab {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.125rem;
      padding: 0.375rem 0.5rem;
      background: transparent;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      text-decoration: none;
      color: #8e8e93;
    }
    
    .tab:hover {
      background: rgba(142, 142, 147, 0.1);
    }
    
    .tab.active {
      background: rgba(201, 169, 97, 0.15);
      color: #C9A961;
    }
    
    .tab-icon {
      font-size: 1.125rem;
      line-height: 1;
    }
    
    .tab-label {
      font-size: 0.625rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.02em;
      font-family: 'DM Sans', sans-serif;
    }

    /* Page header */
    .page-header {
      text-align: center;
      margin-bottom: 2rem;
      padding: 1rem;
    }

    .page-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2rem;
      font-weight: 700;
      color: #C9A961;
      margin-bottom: 0.5rem;
      letter-spacing: -0.02em;
    }

    .page-subtitle {
      font-size: 0.875rem;
      color: #8e8e93;
      font-weight: 500;
    }

    /* View toggle */
    .view-toggle {
      display: flex;
      justify-content: center;
      margin-bottom: 1.5rem;
      padding: 0 1rem;
    }

    .toggle-switch {
      display: flex;
      background: rgba(28, 28, 30, 0.6);
      backdrop-filter: blur(40px);
      border-radius: 0.75rem;
      border: 1px solid rgba(84, 84, 88, 0.25);
      padding: 0.25rem;
      gap: 0.25rem;
    }

    .toggle-btn {
      padding: 0.5rem 1.25rem;
      background: transparent;
      border: none;
      border-radius: 0.5rem;
      color: #8e8e93;
      font-size: 0.8125rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'DM Sans';
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .toggle-btn:hover {
      color: #C9A961;
    }

    .toggle-btn.active {
      background: rgba(201, 169, 97, 0.2);
      color: #C9A961;
      box-shadow: 0 2px 8px rgba(201, 169, 97, 0.2);
    }

    /* Question grid */
    .questions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .question-card {
      background: rgba(28, 28, 30, 0.6);
      backdrop-filter: blur(40px) saturate(150%);
      -webkit-backdrop-filter: blur(40px) saturate(150%);
      border-radius: 1rem;
      border: 1px solid rgba(84, 84, 88, 0.25);
      padding: 1.5rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      position: relative;
      overflow: hidden;
    }

    .question-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #C9A961, rgba(201, 169, 97, 0.3));
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .question-card:hover {
      border-color: rgba(201, 169, 97, 0.5);
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3), 0 0 20px rgba(201, 169, 97, 0.15);
    }

    .question-card:hover::before {
      transform: scaleX(1);
    }

    .question-type {
      font-size: 0.6875rem;
      color: #C9A961;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.75rem;
      display: inline-block;
      padding: 0.25rem 0.625rem;
      background: rgba(201, 169, 97, 0.15);
      border-radius: 0.375rem;
      border: 1px solid rgba(201, 169, 97, 0.3);
    }

    .question-context {
      font-size: 0.75rem;
      color: #8e8e93;
      font-style: italic;
      margin-bottom: 0.875rem;
      padding-left: 0.75rem;
      border-left: 2px solid rgba(201, 169, 97, 0.3);
      line-height: 1.5;
    }

    .question-text {
      font-size: 0.875rem;
      font-weight: 600;
      color: #e5e5e7;
      line-height: 1.5;
      margin-bottom: 1rem;
      font-family: 'Space Grotesk', sans-serif;
    }

    .question-points {
      display: flex;
      flex-direction: column;
      gap: 0.375rem;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid rgba(84, 84, 88, 0.2);
    }

    .point-item {
      font-size: 0.75rem;
      color: #8e8e93;
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
    }

    .point-item::before {
      content: '‚úì';
      color: #C9A961;
      font-weight: 700;
      flex-shrink: 0;
    }

    /* Slideshow mode */
    .slideshow-container {
      display: none;
      position: relative;
      max-width: 50rem;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .slideshow-container.active {
      display: block;
    }

    .poster-card {
      background: linear-gradient(135deg, rgba(28, 28, 30, 0.95) 0%, rgba(44, 44, 46, 0.95) 100%);
      backdrop-filter: blur(40px);
      border-radius: 1.5rem;
      border: 1px solid rgba(84, 84, 88, 0.3);
      padding: 3rem 2.5rem;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      position: relative;
      overflow: hidden;
      min-height: 500px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .poster-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #C9A961, rgba(201, 169, 97, 0.3));
    }

    .poster-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .poster-type {
      font-size: 0.6875rem;
      color: #C9A961;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 1rem;
      display: inline-block;
      padding: 0.375rem 1rem;
      background: rgba(201, 169, 97, 0.15);
      border-radius: 0.5rem;
      border: 1px solid rgba(201, 169, 97, 0.3);
    }

    .poster-context {
      font-size: 0.875rem;
      color: #8e8e93;
      font-style: italic;
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .poster-question {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.75rem;
      font-weight: 700;
      color: #C9A961;
      line-height: 1.3;
      margin-bottom: 2.5rem;
      text-align: center;
    }

    .poster-points {
      background: rgba(201, 169, 97, 0.08);
      border: 1px solid rgba(201, 169, 97, 0.2);
      border-radius: 1rem;
      padding: 1.5rem;
    }

    .poster-points-title {
      font-size: 0.75rem;
      color: #C9A961;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 1rem;
    }

    .poster-point {
      font-size: 0.9375rem;
      color: #e5e5e7;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
    }

    .poster-point::before {
      content: '‚úì';
      color: #C9A961;
      font-weight: 700;
      font-size: 1.125rem;
      flex-shrink: 0;
    }

    .poster-point:last-child {
      margin-bottom: 0;
    }

    .poster-footer {
      text-align: center;
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(84, 84, 88, 0.2);
    }

    .poster-counter {
      font-size: 0.75rem;
      color: #8e8e93;
      font-weight: 600;
    }

    /* Navigation controls */
    .slideshow-nav {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      margin-top: 2rem;
    }

    .nav-btn {
      background: rgba(28, 28, 30, 0.8);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(84, 84, 88, 0.3);
      border-radius: 0.75rem;
      padding: 0.75rem 1.25rem;
      color: #C9A961;
      font-size: 1.25rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'DM Sans';
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .nav-btn:hover:not(:disabled) {
      background: rgba(201, 169, 97, 0.2);
      border-color: rgba(201, 169, 97, 0.5);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(201, 169, 97, 0.3);
    }

    .nav-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .download-btn {
      background: rgba(201, 169, 97, 0.15);
      border: 1px solid rgba(201, 169, 97, 0.3);
      border-radius: 0.75rem;
      padding: 0.625rem 1rem;
      color: #C9A961;
      font-size: 0.8125rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'DM Sans';
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .download-btn:hover {
      background: rgba(201, 169, 97, 0.25);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(201, 169, 97, 0.3);
    }

    /* Loading state */
    .loading-state {
      text-align: center;
      padding: 4rem 2rem;
      color: #8e8e93;
    }

    .loading-spinner {
      display: inline-block;
      width: 2.5rem;
      height: 2.5rem;
      border: 3px solid rgba(142, 142, 147, 0.3);
      border-top-color: #C9A961;
      border-radius: 50%;
      animation: spin 0.8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
      margin-bottom: 1rem;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Error state */
    .error-state {
      text-align: center;
      padding: 4rem 2rem;
      color: #ef4444;
    }

    .error-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .error-title {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      color: #f5f5f7;
    }

    .error-message {
      font-size: 0.875rem;
      color: #8e8e93;
      margin-bottom: 1.5rem;
    }

    .retry-btn {
      padding: 0.75rem 1.5rem;
      background: rgba(201, 169, 97, 0.2);
      border: 1px solid rgba(201, 169, 97, 0.4);
      border-radius: 0.75rem;
      color: #C9A961;
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'DM Sans';
    }

    .retry-btn:hover {
      background: rgba(201, 169, 97, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(201, 169, 97, 0.3);
    }

    /* Mobile */
    @media (max-width: 768px) {
      .container {
        padding: 0.375rem;
      }

      .global-header {
        padding: 0.5rem 0.75rem;
        margin-bottom: 0.75rem;
      }

      .brand-logo {
        font-size: 1.2rem;
      }

      .brand-subtitle {
        font-size: 0.6rem;
      }

      .tab {
        padding: 0.3rem 0.25rem;
      }

      .tab-icon {
        font-size: 1rem;
      }

      .tab-label {
        font-size: 0.5625rem;
      }

      .page-title {
        font-size: 1.5rem;
      }

      .questions-grid {
        grid-template-columns: 1fr;
        gap: 0.75rem;
      }

      .question-card {
        padding: 1.25rem;
      }

      .toggle-btn {
        padding: 0.5rem 0.875rem;
        font-size: 0.75rem;
      }

      .poster-card {
        padding: 2rem 1.5rem;
        min-height: 450px;
      }

      .poster-question {
        font-size: 1.375rem;
      }

      .nav-btn {
        padding: 0.625rem 1rem;
        font-size: 1.125rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    
    <!-- UNIFIED HEADER -->
    <header class="global-header">
      <div class="header-row-main">
        <div class="brand">
          <span class="brand-logo">INTUITY</span>
          <span class="brand-subtitle">Browse Questions</span>
        </div>
        <a href="#" class="home-link">‚Üê Essays</a>
      </div>
      
      <!-- Mode tabs -->
      <nav class="mode-tabs">
        <a href="#" class="tab active">
          <span class="tab-icon">üìä</span>
          <span class="tab-label">Browse</span>
        </a>
        <a href="#" class="tab">
          <span class="tab-icon">üèóÔ∏è</span>
          <span class="tab-label">Structures</span>
        </a>
        <a href="#" class="tab">
          <span class="tab-icon">üî®</span>
          <span class="tab-label">Builder</span>
        </a>
        <a href="#" class="tab">
          <span class="tab-icon">üìñ</span>
          <span class="tab-label">Samples</span>
        </a>
        <a href="#" class="tab">
          <span class="tab-icon">‚úçÔ∏è</span>
          <span class="tab-label">Write</span>
        </a>
      </nav>
    </header>

    <!-- Page header -->
    <div class="page-header">
      <h1 class="page-title">Choose Your Essay Question</h1>
      <p class="page-subtitle">Select an essay topic to begin practicing</p>
    </div>

    <!-- View toggle -->
    <div class="view-toggle">
      <div class="toggle-switch">
        <button class="toggle-btn active" data-view="grid">
          <span>üìä</span>
          <span>Grid View</span>
        </button>
        <button class="toggle-btn" data-view="slideshow">
          <span>üé¥</span>
          <span>Slideshow</span>
        </button>
      </div>
    </div>

    <!-- Questions grid -->
    <div id="questionsContainer">
      <div class="loading-state">
        <div class="loading-spinner"></div>
        <div>Loading essay questions...</div>
      </div>
    </div>

    <!-- Slideshow container -->
    <div id="slideshowContainer" class="slideshow-container">
      <!-- Slides will be injected here -->
    </div>

  </div>

  <script>
    // Embedded JSON data for testing
    const questionsData = [
      {
        "id": "life-better-today",
        "topic": "Life Today vs 100 Years Ago",
        "essayType": "opinion",
        "context": "In your English class you have been talking about life in the past. Now, your English teacher has asked you to write an essay.",
        "mainQuestion": "'Life is better today than it was 100 years ago.' Do you agree?",
        "writingPoints": [
          "health",
          "entertainment",
          "‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ (your own idea)"
        ]
      },
      {
        "id": "work-money-enjoyment",
        "topic": "Work: Money vs Enjoyment",
        "essayType": "for-against",
        "context": "In your English class you have been talking about work. Now, your English teacher has asked you to write an essay.",
        "mainQuestion": "Is it better to earn a lot of money or to enjoy your job?",
        "writingPoints": [
          "how much time is spent at work",
          "the type of work which is done",
          "‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ (your own idea)"
        ]
      },
      {
        "id": "endangered-animals",
        "topic": "Saving Endangered Animals",
        "essayType": "opinion",
        "context": "In your English class you have been talking about animals and the environment. Now, your English teacher has asked you to write an essay.",
        "mainQuestion": "'We should do everything we can to save animals which are in danger of disappearing from our planet.' Do you agree?",
        "writingPoints": [
          "the kind of animals which are in danger",
          "the reasons for protecting these animals",
          "‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ (your own idea)"
        ]
      },
      {
        "id": "friends-vs-family",
        "topic": "Friends vs Family",
        "essayType": "for-against",
        "context": "In your English class you have been talking about relationships. Now, your English teacher has asked you to write an essay.",
        "mainQuestion": "Which is more important ‚Äì friends or family?",
        "writingPoints": [
          "who you can enjoy yourself with",
          "who will help you when you have problems",
          "‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ (your own idea)"
        ]
      },
      {
        "id": "technology-future",
        "topic": "Technology and the Future",
        "essayType": "speculation-trends",
        "context": "In your English class you have been talking about technology and how it's changing. Now, your English teacher has asked you to write an essay.",
        "mainQuestion": "Do you think technology will improve our lives in the future?",
        "writingPoints": [
          "communication and connection",
          "jobs and employment",
          "‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ (your own idea)"
        ]
      }
    ];

    // State
    let currentView = 'grid';
    let currentSlide = 0;

    // Initialize
    function init() {
      console.log('üöÄ Loading essay questions...');
      console.log(`‚úÖ Loaded ${questionsData.length} essay questions`);
      
      renderQuestions();
      renderSlideshow();
      setupViewToggle();
    }

    // Setup view toggle
    function setupViewToggle() {
      const toggleBtns = document.querySelectorAll('.toggle-btn');
      
      toggleBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const view = btn.getAttribute('data-view');
          switchView(view);
        });
      });
    }

    // Switch view
    function switchView(view) {
      currentView = view;
      
      const toggleBtns = document.querySelectorAll('.toggle-btn');
      toggleBtns.forEach(btn => {
        btn.classList.toggle('active', btn.getAttribute('data-view') === view);
      });
      
      const gridContainer = document.getElementById('questionsContainer');
      const slideshowContainer = document.getElementById('slideshowContainer');
      
      if (view === 'grid') {
        gridContainer.style.display = 'block';
        slideshowContainer.classList.remove('active');
      } else {
        gridContainer.style.display = 'none';
        slideshowContainer.classList.add('active');
        showSlide(currentSlide);
      }
    }

    // Render questions
    function renderQuestions() {
      const container = document.getElementById('questionsContainer');
      
      const grid = document.createElement('div');
      grid.className = 'questions-grid';
      
      questionsData.forEach(question => {
        const card = createQuestionCard(question);
        grid.appendChild(card);
      });
      
      container.innerHTML = '';
      container.appendChild(grid);
    }

    // Create question card
    function createQuestionCard(question) {
      const card = document.createElement('div');
      card.className = 'question-card';
      card.onclick = () => selectQuestion(question.id);
      
      const typeLabel = document.createElement('div');
      typeLabel.className = 'question-type';
      typeLabel.textContent = 'B2 First - Part 1';
      
      card.appendChild(typeLabel);
      
      if (question.context) {
        const context = document.createElement('div');
        context.className = 'question-context';
        context.textContent = question.context;
        card.appendChild(context);
      }
      
      const text = document.createElement('div');
      text.className = 'question-text';
      text.textContent = question.mainQuestion || '';
      card.appendChild(text);
      
      if (question.writingPoints && question.writingPoints.length > 0) {
        const points = document.createElement('div');
        points.className = 'question-points';
        
       question.writingPoints.forEach(point => {
       const item = document.createElement('div');
       item.className = 'point-item';
       item.textContent = point;
       points.appendChild(item);
       });
        
        card.appendChild(points);
      }
      
      return card;
    }

    // Render slideshow
    function renderSlideshow() {
      const container = document.getElementById('slideshowContainer');
      container.innerHTML = '';
      
      questionsData.forEach((question, index) => {
        const slide = createPosterSlide(question, index);
        container.appendChild(slide);
      });
      
      const nav = createNavigation();
      container.appendChild(nav);
    }

    // Create poster slide
    function createPosterSlide(question, index) {
      const slide = document.createElement('div');
      slide.className = 'poster-card';
      slide.style.display = index === 0 ? 'flex' : 'none';
      slide.setAttribute('data-slide', index);
      
      const header = document.createElement('div');
      header.className = 'poster-header';
      
      const type = document.createElement('div');
      type.className = 'poster-type';
      type.textContent = 'B2 First - Part 1';
      header.appendChild(type);
      
      if (question.context) {
        const context = document.createElement('div');
        context.className = 'poster-context';
        context.textContent = question.context;
        header.appendChild(context);
      }
      
      slide.appendChild(header);
      
      const questionEl = document.createElement('div');
      questionEl.className = 'poster-question';
      questionEl.textContent = question.mainQuestion;
      slide.appendChild(questionEl);
      
      if (question.writingPoints && question.writingPoints.length > 0) {
        const pointsContainer = document.createElement('div');
        pointsContainer.className = 'poster-points';
        
        const pointsTitle = document.createElement('div');
        pointsTitle.className = 'poster-points-title';
        pointsTitle.textContent = 'Write about';
        pointsContainer.appendChild(pointsTitle);
        
        question.writingPoints.forEach(point => {
          const pointEl = document.createElement('div');
          pointEl.className = 'poster-point';
          pointEl.textContent = point;
          pointsContainer.appendChild(pointEl);
        });
        
        slide.appendChild(pointsContainer);
      }
      
      const footer = document.createElement('div');
      footer.className = 'poster-footer';
      footer.innerHTML = `
        <div class="poster-counter">${index + 1} / ${questionsData.length}</div>
      `;
      slide.appendChild(footer);
      
      return slide;
    }

    // Create navigation
    function createNavigation() {
      const nav = document.createElement('div');
      nav.className = 'slideshow-nav';
      
      const prevBtn = document.createElement('button');
      prevBtn.className = 'nav-btn';
      prevBtn.innerHTML = '<span>‚Üê</span><span>Previous</span>';
      prevBtn.onclick = () => changeSlide(-1);
      
      const downloadBtn = document.createElement('button');
      downloadBtn.className = 'download-btn';
      downloadBtn.innerHTML = '<span>üíæ</span><span>Download</span>';
      downloadBtn.onclick = downloadCurrentSlide;
      
      const nextBtn = document.createElement('button');
      nextBtn.className = 'nav-btn';
      nextBtn.innerHTML = '<span>Next</span><span>‚Üí</span>';
      nextBtn.onclick = () => changeSlide(1);
      
      nav.appendChild(prevBtn);
      nav.appendChild(downloadBtn);
      nav.appendChild(nextBtn);
      
      return nav;
    }

    // Show slide
    function showSlide(index) {
      const slides = document.querySelectorAll('.poster-card');
      const navBtns = document.querySelectorAll('.nav-btn');
      
      slides.forEach((slide, i) => {
        slide.style.display = i === index ? 'flex' : 'none';
      });
      
      if (navBtns.length >= 2) {
        navBtns[0].disabled = index === 0;
        navBtns[1].disabled = index === slides.length - 1;
      }
    }

    // Change slide
    function changeSlide(direction) {
      currentSlide += direction;
      
      if (currentSlide < 0) currentSlide = 0;
      if (currentSlide >= questionsData.length) currentSlide = questionsData.length - 1;
      
      showSlide(currentSlide);
    }

    // Download current slide
    function downloadCurrentSlide() {
      alert('üíæ Screenshot this poster to save it!\n\nTip: You can use your device\'s screenshot feature to capture and save this essay question poster.');
    }

    // Select question
    function selectQuestion(questionId) {
      console.log('üìù Selected question:', questionId);
      alert('Question selected: ' + questionId + '\n\nIn the full version, this would navigate to the essay master page.');
    }

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (currentView === 'slideshow') {
        if (e.key === 'ArrowLeft') changeSlide(-1);
        if (e.key === 'ArrowRight') changeSlide(1);
      }
    });

    // Initialize on load
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>
</body>
</html>   
