<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>INTUITY - Report Structure Skeleton</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'DM Sans', sans-serif;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%);
      color: #e5e5e7;
      min-height: 100vh;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: radial-gradient(circle at 30% 20%, rgba(201, 169, 97, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 2;
      max-width: 1100px;
      margin: 0 auto;
      padding: 1rem;
    }

    /* ============ HEADER ============ */
    .header {
      background: rgba(28, 28, 30, 0.95);
      backdrop-filter: blur(40px);
      border-bottom: 1px solid rgba(84, 84, 88, 0.3);
      padding: 1rem 1.5rem;
      margin-bottom: 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .brand {
      display: flex;
      align-items: baseline;
      gap: 0.5rem;
    }

    .brand-logo {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #C9A961 0%, rgba(255,255,255,0.85) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-transform: uppercase;
      letter-spacing: -0.04em;
    }

    .brand-subtitle {
      font-size: 0.7rem;
      color: #636366;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      font-family: 'IBM Plex Mono', monospace;
    }

    .home-link {
      color: #8e8e93;
      text-decoration: none;
      font-size: 0.8rem;
      font-weight: 600;
      padding: 0.4rem 0.75rem;
      border-radius: 0.5rem;
      transition: all 0.3s;
    }

    .home-link:hover {
      color: #C9A961;
      background: rgba(201, 169, 97, 0.1);
    }

    .nav-tabs {
      display: flex;
      gap: 1.5rem;
      justify-content: center;
    }

    .tab {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;
      padding: 0.625rem 1.25rem;
      background: transparent;
      border-radius: 0.75rem;
      transition: all 0.3s;
      text-decoration: none;
      color: #8e8e93;
      cursor: pointer;
      min-width: 80px;
    }

    .tab:hover {
      background: rgba(142, 142, 147, 0.1);
    }

    .tab.active {
      background: rgba(201, 169, 97, 0.15);
      color: #C9A961;
    }

    .tab-icon {
      font-size: 1.2rem;
    }

    .tab-label {
      font-size: 0.65rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }

    /* ============ MAIN CARD ============ */
    .main-card {
      background: rgba(28, 28, 30, 0.6);
      backdrop-filter: blur(40px);
      border-radius: 1.25rem;
      border: 1px solid rgba(84, 84, 88, 0.25);
      padding: 1.25rem;
      min-height: 500px;
    }

    /* ============ COMPACT CONTROL BAR ============ */
    .control-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 1rem;
      margin-bottom: 0.75rem;
      gap: 1rem;
    }
    
    .control-left {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    /* ============ TRIPLE TOGGLE SWITCH ============ */
    .triple-toggle {
      display: inline-flex;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 0.5rem;
      padding: 0.2rem;
      border: 1px solid rgba(84, 84, 88, 0.3);
    }

    .toggle-btn {
      padding: 0.4rem 0.75rem;
      background: transparent;
      border: none;
      border-radius: 0.35rem;
      color: #8e8e93;
      font-size: 0.7rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'DM Sans', sans-serif;
      white-space: nowrap;
    }

    .toggle-btn:hover {
      background: rgba(142, 142, 147, 0.15);
    }

    .toggle-btn.active {
      background: rgba(201, 169, 97, 0.2);
      color: #C9A961;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .toggle-btn.slides-active {
      background: linear-gradient(135deg, rgba(201, 169, 97, 0.25), rgba(201, 169, 97, 0.15));
      color: #C9A961;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    /* ============ INFOGRAPHIC SLIDES MODE ============ */
    .slides-container {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    .infographic-card {
      display: flex;
      align-items: stretch;
      background: #fff;
      border-radius: 0.5rem;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      min-height: 110px;
    }

    .infographic-card:hover {
      transform: translateY(-3px) scale(1.01);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2), 0 4px 10px rgba(0, 0, 0, 0.15);
    }

    .card-number-section {
      width: 70px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 0.75rem;
      position: relative;
      flex-shrink: 0;
    }

    .card-number-section::after {
      content: '';
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 0;
      height: 0;
      border-left: 12px solid currentColor;
      border-top: 20px solid transparent;
      border-bottom: 20px solid transparent;
    }

    .card-number {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.75rem;
      font-weight: 800;
      color: #fff;
      line-height: 1;
    }

    .card-letter {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.6rem;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.8);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-top: 0.25rem;
    }

    .card-content {
      flex: 1;
      padding: 0.875rem 1rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      background: #fff;
    }

    .card-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 0.85rem;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }

    .card-text {
      font-size: 0.75rem;
      color: #4a4a4a;
      line-height: 1.5;
      font-weight: 500;
    }

    .card-expressions {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 0.375rem;
    }

    .card-expressions li {
      font-size: 0.7rem;
      color: #4a4a4a;
      line-height: 1.4;
      font-weight: 500;
      padding-left: 0.875rem;
      position: relative;
    }

    .card-expressions li::before {
      content: '‚Ä¢';
      position: absolute;
      left: 0;
      color: #C9A961;
      font-weight: bold;
      font-size: 0.8rem;
    }

    .card-icon-section {
      width: 55px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.03);
      flex-shrink: 0;
    }

    .card-icon {
      font-size: 1.5rem;
      opacity: 0.7;
    }

    /* Card Colors */
    .infographic-card[data-section="intro_opening"] .card-number-section {
      background: linear-gradient(135deg, #e74c3c, #c0392b);
    }
    .infographic-card[data-section="intro_opening"] .card-number-section::after {
      border-left-color: #c0392b;
    }

    .infographic-card[data-section="intro_methodology"] .card-number-section {
      background: linear-gradient(135deg, #f39c12, #d68910);
    }
    .infographic-card[data-section="intro_methodology"] .card-number-section::after {
      border-left-color: #d68910;
    }

    .infographic-card[data-section="neutral"] .card-number-section {
      background: linear-gradient(135deg, #3498db, #2980b9);
    }
    .infographic-card[data-section="neutral"] .card-number-section::after {
      border-left-color: #2980b9;
    }

    .infographic-card[data-section="praising"] .card-number-section {
      background: linear-gradient(135deg, #2ecc71, #27ae60);
    }
    .infographic-card[data-section="praising"] .card-number-section::after {
      border-left-color: #27ae60;
    }

    .infographic-card[data-section="criticising"] .card-number-section {
      background: linear-gradient(135deg, #e91e63, #c2185b);
    }
    .infographic-card[data-section="criticising"] .card-number-section::after {
      border-left-color: #c2185b;
    }

    .infographic-card[data-section="recommending"] .card-number-section {
      background: linear-gradient(135deg, #9b59b6, #8e44ad);
    }
    .infographic-card[data-section="recommending"] .card-number-section::after {
      border-left-color: #8e44ad;
    }

    .infographic-card[data-section="conclusion"] .card-number-section {
      background: linear-gradient(135deg, #1abc9c, #16a085);
    }
    .infographic-card[data-section="conclusion"] .card-number-section::after {
      border-left-color: #16a085;
    }

    /* Slides Navigation */
    .slides-nav {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      margin-top: 1.5rem;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 0.75rem;
    }

    .slides-nav-btn {
      padding: 0.625rem 1.25rem;
      background: rgba(28, 28, 30, 0.6);
      border: 1px solid rgba(84, 84, 88, 0.3);
      border-radius: 999px;
      color: #C9A961;
      font-size: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'DM Sans';
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .slides-nav-btn:hover:not(:disabled) {
      background: rgba(201, 169, 97, 0.15);
      border-color: rgba(201, 169, 97, 0.4);
      transform: translateY(-1px);
    }

    .slides-nav-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .slides-counter {
      color: #8e8e93;
      font-size: 0.8rem;
      font-weight: 600;
      min-width: 80px;
      text-align: center;
      font-family: 'IBM Plex Mono', monospace;
    }

    .slides-shuffle-btn {
      padding: 0.625rem 1.5rem;
      background: linear-gradient(135deg, #C9A961, #d4a574);
      border: none;
      border-radius: 999px;
      color: #0a0a0a;
      font-size: 0.8rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'DM Sans';
      text-transform: uppercase;
      letter-spacing: 0.05em;
      box-shadow: 0 4px 12px rgba(201, 169, 97, 0.3);
    }

    .slides-shuffle-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(201, 169, 97, 0.5);
    }

    .slides-shuffle-btn:active {
      transform: translateY(0);
    }

    /* Mobile Slides */
    @media (max-width: 768px) {
      .infographic-card {
        min-height: 100px;
      }
      .card-number-section {
        width: 55px;
        padding: 0.5rem;
      }
      .card-number {
        font-size: 1.4rem;
      }
      .card-letter {
        font-size: 0.5rem;
      }
      .card-number-section::after {
        border-left-width: 10px;
        border-top-width: 16px;
        border-bottom-width: 16px;
      }
      .card-content {
        padding: 0.625rem 0.75rem;
      }
      .card-title {
        font-size: 0.75rem;
        margin-bottom: 0.375rem;
      }
      .card-text {
        font-size: 0.65rem;
      }
      .card-expressions li {
        font-size: 0.625rem;
        line-height: 1.35;
      }
      .card-icon-section {
        width: 40px;
      }
      .card-icon {
        font-size: 1.1rem;
      }
      .slides-nav {
        flex-wrap: wrap;
        gap: 0.75rem;
      }
      .slides-nav-btn {
        padding: 0.5rem 1rem;
        font-size: 0.7rem;
      }
      .slides-shuffle-btn {
        padding: 0.5rem 1.25rem;
        font-size: 0.7rem;
      }
    }

    /* ============ X-RAY BUTTON (IN CONTROL BAR) ============ */
    .xray-btn {
      padding: 0.4rem 1rem;
      background: transparent;
      border: 1px solid rgba(125, 211, 252, 0.3);
      border-radius: 0.4rem;
      color: #7dd3fc;
      font-size: 0.7rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'DM Sans', sans-serif;
      white-space: nowrap;
    }

    .xray-btn:hover {
      background: rgba(125, 211, 252, 0.1);
      border-color: rgba(125, 211, 252, 0.5);
    }
    
    .xray-btn.active {
      background: rgba(125, 211, 252, 0.15);
      border-color: #7dd3fc;
    }

    /* ============ SKELETON GRID ============ */
    .skeleton-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }

    /* ============ SECTION ============ */
    .section {
      border-left: 3px solid;
      padding-left: 1rem;
    }

    .section-title {
      font-size: 1rem;
      font-weight: 700;
      font-family: 'Space Grotesk', sans-serif;
      margin-bottom: 0.4rem;
      letter-spacing: 0.02em;
      text-transform: uppercase;
    }

    /* ============ SUB-SECTION STYLING ============ */
    .subsection {
      margin-bottom: 0.9rem;
    }

    .subsection:last-child {
      margin-bottom: 0;
    }

    .subsection-title {
      font-size: 0.75rem;
      font-weight: 600;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 0.3rem;
      padding-left: 0.25rem;
      border-left: 2px solid rgba(201, 169, 97, 0.4);
      padding-left: 0.5rem;
      font-family: 'IBM Plex Mono', monospace;
    }

    .sentence-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .sentence-list li {
      padding: 0.35rem 0;
      color: #d1d5db;
      font-size: 0.875rem;
      line-height: 1.5;
      position: relative;
      padding-left: 1.25rem;
    }

    .sentence-list li::before {
      content: '‚Ä¢';
      position: absolute;
      left: 0;
      color: #C9A961;
      font-weight: bold;
    }

    /* ============ X-RAY HIGHLIGHTING ============ */
    .sentence-list.xray-active .formal,
    .sentence-list.xray-active .discourse,
    .sentence-list.xray-active .recommend {
      color: #7dd3fc !important;
      font-weight: 600 !important;
      border-bottom: 2px solid rgba(125, 211, 252, 0.4) !important;
      padding-bottom: 2px !important;
      text-shadow: 0 0 8px rgba(125, 211, 252, 0.2);
    }

    .sentence-list.xray-active .positive {
      color: #10b981 !important;
      font-weight: 600 !important;
      border-bottom: 2px solid rgba(16, 185, 129, 0.4) !important;
      padding-bottom: 2px !important;
      text-shadow: 0 0 8px rgba(16, 185, 129, 0.2);
    }

    .sentence-list.xray-active .negative {
      color: #f59e0b !important;
      font-weight: 600 !important;
      border-bottom: 2px solid rgba(245, 158, 11, 0.4) !important;
      padding-bottom: 2px !important;
      text-shadow: 0 0 8px rgba(245, 158, 11, 0.2);
    }

    /* ============ NAVIGATION ============ */
    .navigation {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1.5rem;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 0.75rem;
    }

    .nav-btn {
      padding: 0.625rem 1.5rem;
      background: rgba(28, 28, 30, 0.6);
      border: 1px solid rgba(84, 84, 88, 0.3);
      border-radius: 999px;
      color: #C9A961;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'DM Sans';
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .nav-btn:hover:not(:disabled) {
      background: rgba(201, 169, 97, 0.15);
      border-color: rgba(201, 169, 97, 0.4);
      transform: translateY(-1px);
    }

    .nav-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .nav-counter {
      color: #8e8e93;
      font-size: 0.8rem;
      font-weight: 500;
    }

    /* ============ MOBILE ============ */
    @media (max-width: 768px) {
      /* Minimize container padding */
      .container { padding: 0.4rem; }
      
      /* Compact header - maximized space for content */
      .header { 
        padding: 0.4rem 0.6rem; 
        margin-bottom: 0.5rem; 
        border-radius: 0.6rem; 
      }
      .header-row { 
        margin-bottom: 0.4rem; 
        gap: 0.5rem;
      }
      .brand { gap: 0.3rem; }
      .brand-logo { font-size: 0.95rem; }
      .brand-subtitle { 
        font-size: 0.5rem; 
        display: none; /* Hide subtitle on mobile to save space */
      }
      .home-link { 
        font-size: 0.65rem; 
        padding: 0.25rem 0.5rem; 
      }
      
      /* Ultra-compact navigation tabs - single line */
      .nav-tabs { 
        gap: 0.2rem; 
      }
      .tab { 
        padding: 0.3rem 0.35rem; 
        min-width: 45px;
        gap: 0.1rem;
        border-radius: 0.5rem;
      }
      .tab-icon { font-size: 0.85rem; }
      .tab-label { 
        font-size: 0.5rem;
        letter-spacing: 0;
      }
      
      /* Compact version tabs */
      .control-bar { 
        padding: 0.4rem 0.6rem; 
        gap: 0.5rem; 
        margin-bottom: 0.5rem;
      }
      .control-left {
        gap: 0.5rem;
      }
      .triple-toggle {
        padding: 0.15rem;
      }
      .toggle-btn { 
        padding: 0.3rem 0.5rem; 
        font-size: 0.6rem; 
      }
      
      /* Compact X-Ray */
      .xray-btn { 
        padding: 0.3rem 0.7rem; 
        font-size: 0.6rem; 
      }
      
      /* Maximize space for content */
      .main-card { 
        padding: 0.6rem 0.5rem; 
        border-radius: 1rem;
      }
      .skeleton-grid { 
        gap: 0.75rem; 
        margin-bottom: 0.75rem; 
      }
      .section { 
        padding-left: 0.6rem; 
        border-left-width: 2px;
      }
      .section-title { 
        font-size: 0.8rem; 
        margin-bottom: 0.3rem; 
      }
      .subsection { margin-bottom: 0.6rem; }
      .subsection-title { 
        font-size: 0.58rem; 
        margin-bottom: 0.25rem;
        padding-left: 0.4rem;
      }
      .sentence-list li { 
        font-size: 0.78rem; 
        padding: 0.25rem 0 0.25rem 0.9rem; 
        line-height: 1.4;
      }
      .sentence-list li::before { 
        font-size: 0.65rem; 
      }
      
      /* Compact navigation */
      .navigation {
        padding: 0.6rem;
        gap: 0.75rem;
      }
      .nav-btn {
        padding: 0.4rem 0.8rem;
        font-size: 0.65rem;
      }
      .nav-counter {
        font-size: 0.7rem;
      }
    }
    
    /* Extra small phones */
    @media (max-width: 380px) {
      .tab { 
        padding: 0.25rem 0.25rem; 
        min-width: 40px;
      }
      .tab-icon { font-size: 0.75rem; }
      .tab-label { font-size: 0.45rem; }
      .brand-logo { font-size: 0.85rem; }
      .home-link { font-size: 0.6rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    
    <!-- HEADER -->
    <header class="header">
      <div class="header-row">
        <div class="brand">
          <span class="brand-logo">INTUITY</span>
          <span class="brand-subtitle">Report Structures</span>
        </div>
        <a href="../../../index.html?openModal=writing&submenu=reports" class="home-link">‚Üê Reports</a>
      </div>
      
      <nav class="nav-tabs">
        <a href="report-question-selector.html" class="tab">
          <span class="tab-icon">üìä</span>
          <span class="tab-label">Browse</span>
        </a>
        <div class="tab active">
          <span class="tab-icon">üèóÔ∏è</span>
          <span class="tab-label">Structures</span>
        </div>
        <a href="report-master.html" class="tab">
          <span class="tab-icon">üìñ</span>
          <span class="tab-label">Samples</span>
        </a>
        <a href="report-writer.html" class="tab">
          <span class="tab-icon">‚úçÔ∏è</span>
          <span class="tab-label">Write</span>
        </a>
        <a href="report-language.html" class="tab">
          <span class="tab-icon">üìö</span>
          <span class="tab-label">Language</span>
        </a>
      </nav>
    </header>

    <!-- MAIN CARD -->
    <div class="main-card">
      
      <!-- COMPACT CONTROL BAR -->
      <div class="control-bar">
        <div class="control-left">
          <!-- VERSION TOGGLE (LEFT) -->
          <div class="triple-toggle">
            <button class="toggle-btn active" onclick="switchVersion('default')">Default</button>
            <button class="toggle-btn" onclick="switchVersion('alt1')">Alt 1</button>
            <button class="toggle-btn" onclick="switchVersion('alt2')">Alt 2</button>
          </div>

          <!-- DISPLAY MODE TOGGLE (CENTER) -->
          <div class="triple-toggle">
            <button class="toggle-btn" onclick="switchMode('cards')">Cards</button>
            <button class="toggle-btn active" onclick="switchMode('full')">Full</button>
            <button class="toggle-btn" onclick="switchMode('slides')">üé¨ Slides</button>
          </div>
        </div>

        <!-- X-RAY BUTTON (RIGHT) -->
        <button class="xray-btn" onclick="toggleXRay()">X-Ray</button>
      </div>

      <!-- SKELETON CONTENT -->
      <div id="skeletonContent"></div>

      <!-- NAVIGATION (for cards mode) -->
      <div class="navigation" id="navigation" style="display: none;">
        <button class="nav-btn" id="prevBtn" onclick="prevSection()">‚Üê Previous</button>
        <span class="nav-counter" id="counter">Section 1 / 6</span>
        <button class="nav-btn" id="nextBtn" onclick="nextSection()">Next ‚Üí</button>
      </div>

    </div>

  </div>

  <script>
    // ==================== STATE ====================
    let currentVersion = 'default';
    let currentMode = 'full';
    let currentSection = 0;
    let xrayActive = false;

    // ==================== SENTENCE DATA ====================
    // Introduction is now split into 'opening' (purpose) and 'methodology' (source)
    const SENTENCES = {
      default: {
        intro_opening: [
          "The aim of this report is to assess/evaluate/examine [topic].",
          "This report aims to provide an overview of [facility/event].",
          "The purpose of this report is to analyse [topic] and make recommendations.",
          "This report seeks to identify the strengths and weaknesses of [topic].",
          "The objective of this report is to evaluate [topic] and suggest improvements."
        ],
        intro_methodology: [
          "It is based on my personal views/a questionnaire/interviews.",
          "The information was collected through surveys/observations.",
          "The data was obtained by conducting interviews with [group].",
          "The findings are based on feedback gathered from [number] participants.",
          "This assessment draws on both formal surveys and informal discussions."
        ],
        neutral: [
          "Overall, most people felt that [topic] was adequate/satisfactory.",
          "On the whole, respondents had mixed views about [aspect].",
          "The general consensus is that [topic] meets basic requirements.",
          "Feedback suggests that [aspect] serves its intended purpose.",
          "It was noted that [facility] operates within acceptable standards."
        ],
        praising: [
          "One thing that worked really well was [positive aspect].",
          "A definite strength was [feature], which impressed many people.",
          "By far the best aspect is [element], particularly because [reason].",
          "Many participants highlighted [feature] as outstanding.",
          "It should be emphasized that [achievement] exceeded expectations."
        ],
        criticising: [
          "However, a common complaint was that [problem] needs improvement.",
          "One major issue was [issue], mainly because [reason].",
          "Unfortunately, [aspect] falls short in several key areas.",
          "Many people expressed frustration with [problem].",
          "It must be acknowledged that [issue] requires urgent attention."
        ],
        recommending: [
          "To improve [aspect], it would be advisable to [action].",
          "One simple way to fix this would be to [suggestion].",
          "It is recommended that [authority] introduces [change].",
          "A practical step would be to [action], leading to [benefit].",
          "If this change is made, it would help [group] because [reason]."
        ],
        conclusion: [
          "In conclusion, [topic] works well overall, but [area] needs improvement.",
          "To sum up, the main strengths are [X], while the biggest issue is [Y].",
          "Taking everything into account, the most important change would be [recommendation].",
          "Overall, these improvements would make a real difference for [group].",
          "Looking ahead, the priority should be [key recommendation]."
        ]
      },
      alt1: {
        intro_opening: [
          "The main purpose of this report is to determine [topic] and suggest improvements.",
          "This report has been prepared to evaluate [procedure/system].",
          "The intention of this report is to review [topic] and propose changes.",
          "This report examines [topic] with a view to recommending enhancements.",
          "The goal of this assessment is to analyse [topic] and identify areas for development."
        ],
        intro_methodology: [
          "The report is based on feedback from [participants] and observations.",
          "The findings come from comments made by [group] during [time period].",
          "Research was conducted among [number] participants across [departments].",
          "Data was gathered through a combination of questionnaires and focus groups.",
          "The conclusions are drawn from interviews with key stakeholders."
        ],
        neutral: [
          "Most participants acknowledged that [topic] serves its intended purpose.",
          "There appears to be broad recognition that [aspect] has both merits and limitations.",
          "The prevailing view is that [aspect] operates within acceptable parameters.",
          "Observations indicate that [topic] maintains a consistent standard.",
          "Survey results show a moderate level of satisfaction with [topic]."
        ],
        praising: [
          "What makes [aspect] particularly valuable is [reason].",
          "It is worth noting that [positive aspect] exceeded expectations.",
          "Participants were especially impressed by [feature].",
          "The quality of [aspect] was consistently praised.",
          "Feedback was overwhelmingly positive regarding [aspect]."
        ],
        criticising: [
          "A significant concern raised by many was [issue].",
          "One persistent problem is [issue], which has been mentioned repeatedly.",
          "There are serious concerns about [aspect], particularly regarding [specific issue].",
          "A major drawback is [issue], which impacts [consequence].",
          "The most frequently cited complaint was [problem]."
        ],
        recommending: [
          "It would be advisable to [action] in order to address [issue].",
          "The most effective solution would be to [recommendation].",
          "To prevent [problem] from recurring, [action] should be implemented.",
          "I would strongly recommend [action], as this would [benefit].",
          "In order to maximize [outcome], it is essential that [action]."
        ],
        conclusion: [
          "All things considered, [topic] demonstrates [overall assessment].",
          "The findings clearly indicate that [main conclusion].",
          "On balance, while [positive], there is scope for improvement in [area].",
          "The evidence suggests that [conclusion], provided that [condition].",
          "Ultimately, the success of [topic] depends on addressing [key issue]."
        ]
      },
      alt2: {
        intro_opening: [
          "This report looks at [topic] in order to identify what works well and what needs improving.",
          "The purpose of this report is to examine [topic] and how it affects [group].",
          "This report investigates [topic] with the aim of making practical recommendations.",
          "The focus of this report is to assess [topic] from the perspective of [group].",
          "This assessment aims to provide a balanced evaluation of [topic]."
        ],
        intro_methodology: [
          "This assessment draws on responses from [number] participants.",
          "Information was gathered through questionnaires/interviews/observation.",
          "This report is based on interviews with [group] and informal feedback.",
          "The data presented here comes from a survey of [number] respondents.",
          "Findings are based on direct observation and structured interviews."
        ],
        neutral: [
          "Participants generally described [aspect] as functional and practical.",
          "Most users acknowledged that [facility] serves a useful purpose.",
          "Feedback indicates that [system] operates within normal parameters.",
          "The general view is that [workplace element] meets basic requirements.",
          "Community members generally view [service] as reasonably effective."
        ],
        praising: [
          "The highlight was [best part], which many people mentioned.",
          "One impressive aspect is the way [topic] manages to [achievement].",
          "The success of [feature] demonstrates [positive quality].",
          "Particularly noteworthy is [aspect], which has proven highly effective.",
          "A notable success has been [achievement]."
        ],
        criticising: [
          "[Aspect] was not ideal, especially when [situation/example].",
          "This seems to be caused by [cause], which affects [result].",
          "Disappointingly, [aspect] has not lived up to expectations.",
          "Critical feedback focused on [issue], with many stating that [specific complaint].",
          "One area that clearly needs improvement is [aspect]."
        ],
        recommending: [
          "Another option would be to [alternative], which could reduce [problem].",
          "One way to enhance [aspect] would be to [suggestion].",
          "A priority should be to [recommendation], which would [result].",
          "The organization should consider investing in [resource].",
          "An immediate improvement would be to [suggestion]."
        ],
        conclusion: [
          "In summary, the recommendations above would lead to a better experience for [group].",
          "To conclude, implementing these suggestions would significantly enhance [aspect].",
          "In final analysis, [topic] has considerable potential if [action] is undertaken.",
          "Based on the facts presented above, I conclude that [conclusion].",
          "Looking forward, the community would benefit significantly from [action]."
        ]
      }
    };

    // ==================== SECTION METADATA ====================
    // Introduction now has two sub-sections
    const SECTIONS = [
      { 
        key: 'introduction', 
        letter: 'A', 
        title: 'INTRODUCTION', 
        color: '#3b82f6', 
        icon: 'üéØ',
        hasSubsections: true,
        subsections: [
          { key: 'intro_opening', label: 'A1: Opening (Purpose)' },
          { key: 'intro_methodology', label: 'A2: Methodology (Source)' }
        ]
      },
      { key: 'neutral', letter: 'B', title: 'GENERAL VIEW', color: '#3b82f6', icon: '‚öñÔ∏è' },
      { key: 'praising', letter: 'C', title: 'PRAISING', color: '#f97316', icon: 'üëç' },
      { key: 'criticising', letter: 'D', title: 'CRITICISING', color: '#f97316', icon: '‚ùå' },
      { key: 'recommending', letter: 'E', title: 'RECOMMENDING', color: '#8b5cf6', icon: 'üîß' },
      { key: 'conclusion', letter: 'F', title: 'CONCLUSION', color: '#8b5cf6', icon: 'üéÅ' }
    ];

    // ==================== X-RAY PATTERNS ====================
    const XRAY_PATTERNS = {
      discourse: ['however', 'furthermore', 'in conclusion', 'overall', 'on the whole', 'taking everything into account', 'all things considered', 'to sum up', 'in summary', 'looking ahead', 'looking forward', 'on balance', 'ultimately'],
      formal: ['the aim of this report', 'this report aims to', 'the purpose of this report', 'this report seeks to', 'the objective of this report', 'the intention of this report', 'the main purpose', 'the goal of this assessment', 'the focus of this report', 'this assessment aims', 'it is based on', 'the information was collected', 'the data was obtained', 'the findings are based on', 'this assessment draws on', 'the report is based on', 'the findings come from', 'research was conducted', 'data was gathered', 'the conclusions are drawn', 'information was gathered', 'findings are based on', 'the general consensus', 'feedback suggests', 'it was noted that'],
      recommend: ['to improve', 'it would be advisable', 'it is recommended that', 'one simple way', 'a practical step', 'if this change is made', 'the most effective solution', 'to prevent', 'i would strongly recommend', 'in order to maximize', 'another option would be', 'one way to enhance', 'a priority should be', 'should consider investing', 'an immediate improvement'],
      positive: ['worked really well', 'a definite strength', 'by far the best aspect', 'exceeded expectations', 'it should be emphasized', 'particularly valuable', 'consistently praised', 'especially impressed', 'overwhelmingly positive', 'the highlight was', 'one impressive aspect', 'particularly noteworthy', 'a notable success'],
      negative: ['a common complaint', 'one major issue', 'unfortunately', 'falls short', 'expressed frustration', 'must be acknowledged', 'requires urgent attention', 'serious concerns', 'a major drawback', 'a significant concern', 'one persistent problem', 'most frequently cited complaint', 'was not ideal', 'disappointingly', 'has not lived up', 'critical feedback', 'clearly needs improvement']
    };

    // ==================== RENDER ====================
    function render() {
      const container = document.getElementById('skeletonContent');
      const sentences = SENTENCES[currentVersion];
      let html = '';

      if (currentMode === 'full') {
        // FULL MODE: Show all 6 sections in grid
        html = '<div class="skeleton-grid">';
        SECTIONS.forEach((section, index) => {
          html += renderSection(section, sentences);
        });
        html += '</div>';
        document.getElementById('navigation').style.display = 'none';
      } else if (currentMode === 'slides') {
        // SLIDES MODE: Infographic cards with 3 random expressions per section
        html = renderSlidesMode(sentences);
        document.getElementById('navigation').style.display = 'none';
      } else {
        // CARDS MODE: Show one section at a time
        const section = SECTIONS[currentSection];
        html = '<div class="skeleton-grid" style="grid-template-columns: 1fr;">';
        html += renderSection(section, sentences);
        html += '</div>';
        document.getElementById('navigation').style.display = 'flex';
        updateNavigation();
      }

      container.innerHTML = html;
      applyXRay();
    }

    // ==================== SLIDES MODE RENDER ====================
    let currentSlideSet = 0;
    const TOTAL_SLIDE_SETS = 5; // 5 sets x 3 expressions = 15 per section (covers all 75)

    function renderSlidesMode(sentences) {
      const slideData = [
        { key: 'intro_opening', number: '01', letter: 'A1', title: 'Opening', icon: 'üéØ' },
        { key: 'intro_methodology', number: '02', letter: 'A2', title: 'Methodology', icon: 'üìã' },
        { key: 'neutral', number: '03', letter: 'B', title: 'General View', icon: '‚öñÔ∏è' },
        { key: 'praising', number: '04', letter: 'C', title: 'Praising', icon: 'üëç' },
        { key: 'criticising', number: '05', letter: 'D', title: 'Criticising', icon: '‚ùå' },
        { key: 'recommending', number: '06', letter: 'E', title: 'Recommending', icon: 'üîß' },
        { key: 'conclusion', number: '07', letter: 'F', title: 'Conclusion', icon: 'üéÅ' }
      ];

      let html = '<div class="slides-container">';

      slideData.forEach(slide => {
        const sectionSentences = sentences[slide.key] || [];
        
        // Get 3 expressions based on current slide set
        // Use modulo to cycle through available sentences
        const expressions = [];
        for (let i = 0; i < 3; i++) {
          const index = (currentSlideSet * 3 + i) % sectionSentences.length;
          const sentence = sectionSentences[index] || '';
          // Clean up the sentence for display (replace brackets with blanks)
          const displayText = sentence.replace(/\[([^\]]+)\]/g, '___');
          expressions.push(displayText);
        }

        html += `
          <div class="infographic-card" data-section="${slide.key}">
            <div class="card-number-section">
              <span class="card-number">${slide.number}</span>
              <span class="card-letter">${slide.letter}</span>
            </div>
            <div class="card-content">
              <div class="card-title">${slide.title}</div>
              <ul class="card-expressions">
                ${expressions.map(exp => `<li>${exp}</li>`).join('')}
              </ul>
            </div>
            <div class="card-icon-section">
              <span class="card-icon">${slide.icon}</span>
            </div>
          </div>
        `;
      });

      html += `
        <div class="slides-nav">
          <button class="slides-nav-btn" onclick="prevSlideSet()" ${currentSlideSet === 0 ? 'disabled' : ''}>‚Üê Previous</button>
          <span class="slides-counter">Set ${currentSlideSet + 1} / ${TOTAL_SLIDE_SETS}</span>
          <button class="slides-nav-btn" onclick="nextSlideSet()" ${currentSlideSet === TOTAL_SLIDE_SETS - 1 ? 'disabled' : ''}>Next ‚Üí</button>
        </div>
        <div class="slides-nav" style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
          <button class="slides-shuffle-btn" onclick="shuffleSlides()">üé≤ Random Mix</button>
        </div>
      </div>`;

      return html;
    }

    function nextSlideSet() {
      if (currentSlideSet < TOTAL_SLIDE_SETS - 1) {
        currentSlideSet++;
        render();
      }
    }

    function prevSlideSet() {
      if (currentSlideSet > 0) {
        currentSlideSet--;
        render();
      }
    }

    function shuffleSlides() {
      // Randomize the current slide set
      currentSlideSet = Math.floor(Math.random() * TOTAL_SLIDE_SETS);
      render();
    }

    function renderSection(section, allSentences) {
      let contentHTML = '';

      if (section.hasSubsections) {
        // Render sub-sections (for Introduction)
        section.subsections.forEach(sub => {
          const subSentences = allSentences[sub.key] || [];
          const sentencesHTML = subSentences.map(s => {
            let wrapped = wrapXRayPatterns(s);
            return `<li>${wrapped}</li>`;
          }).join('');

          contentHTML += `
            <div class="subsection">
              <div class="subsection-title">${sub.label}</div>
              <ul class="sentence-list ${xrayActive ? 'xray-active' : ''}">
                ${sentencesHTML}
              </ul>
            </div>
          `;
        });
      } else {
        // Render regular section
        const sectionSentences = allSentences[section.key] || [];
        const sentencesHTML = sectionSentences.map(s => {
          let wrapped = wrapXRayPatterns(s);
          return `<li>${wrapped}</li>`;
        }).join('');

        contentHTML = `
          <ul class="sentence-list ${xrayActive ? 'xray-active' : ''}">
            ${sentencesHTML}
          </ul>
        `;
      }

      return `
        <div class="section" style="border-left-color: ${section.color};">
          <h3 class="section-title" style="color: ${section.color};">
            ${section.icon} ${section.letter}: ${section.title}
          </h3>
          ${contentHTML}
        </div>
      `;
    }

    // ==================== X-RAY ====================
    function wrapXRayPatterns(text) {
      let wrapped = text;
      
      XRAY_PATTERNS.discourse.forEach(pattern => {
        const regex = new RegExp(`\\b(${escapeRegex(pattern)})\\b`, 'gi');
        wrapped = wrapped.replace(regex, '<span class="discourse">$1</span>');
      });

      XRAY_PATTERNS.formal.forEach(pattern => {
        const regex = new RegExp(`(${escapeRegex(pattern)})`, 'gi');
        wrapped = wrapped.replace(regex, '<span class="formal">$1</span>');
      });

      XRAY_PATTERNS.recommend.forEach(pattern => {
        const regex = new RegExp(`(${escapeRegex(pattern)})`, 'gi');
        wrapped = wrapped.replace(regex, '<span class="recommend">$1</span>');
      });

      XRAY_PATTERNS.positive.forEach(pattern => {
        const regex = new RegExp(`(${escapeRegex(pattern)})`, 'gi');
        wrapped = wrapped.replace(regex, '<span class="positive">$1</span>');
      });

      XRAY_PATTERNS.negative.forEach(pattern => {
        const regex = new RegExp(`(${escapeRegex(pattern)})`, 'gi');
        wrapped = wrapped.replace(regex, '<span class="negative">$1</span>');
      });

      return wrapped;
    }

    function escapeRegex(string) {
      return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }

    function toggleXRay() {
      xrayActive = !xrayActive;
      const btn = document.querySelector('.xray-btn');
      btn.textContent = xrayActive ? 'Normal' : 'X-Ray';
      btn.classList.toggle('active', xrayActive);
      applyXRay();
    }

    function applyXRay() {
      document.querySelectorAll('.sentence-list').forEach(list => {
        list.classList.toggle('xray-active', xrayActive);
      });
    }

    // ==================== VERSION SWITCHING ====================
    function switchVersion(version) {
      currentVersion = version;
      
      // Update version toggle buttons
      document.querySelectorAll('.triple-toggle')[0].querySelectorAll('.toggle-btn').forEach((btn, idx) => {
        btn.classList.remove('active');
        if ((version === 'default' && idx === 0) || 
            (version === 'alt1' && idx === 1) || 
            (version === 'alt2' && idx === 2)) {
          btn.classList.add('active');
        }
      });
      
      render();
    }

    // ==================== MODE SWITCHING ====================
    function switchMode(mode) {
      currentMode = mode;
      
      // Update mode toggle buttons
      document.querySelectorAll('.triple-toggle')[1].querySelectorAll('.toggle-btn').forEach((btn, idx) => {
        btn.classList.remove('active', 'slides-active');
        if ((mode === 'cards' && idx === 0) || 
            (mode === 'full' && idx === 1) || 
            (mode === 'slides' && idx === 2)) {
          btn.classList.add(mode === 'slides' ? 'slides-active' : 'active');
        }
      });
      
      render();
    }

    // ==================== NAVIGATION ====================
    function prevSection() {
      if (currentSection > 0) {
        currentSection--;
        render();
      }
    }

    function nextSection() {
      if (currentSection < 5) {
        currentSection++;
        render();
      }
    }

    function updateNavigation() {
      document.getElementById('counter').textContent = `Section ${currentSection + 1} / 6`;
      document.getElementById('prevBtn').disabled = currentSection === 0;
      document.getElementById('nextBtn').disabled = currentSection === 5;
    }

    // ==================== INIT ====================
    render();
  </script>
</body>
</html>
