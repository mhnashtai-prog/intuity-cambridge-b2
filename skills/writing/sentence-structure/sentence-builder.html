<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>INTUITY - Sentence Builder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --accent: #C9A961;
      --accent-soft: rgba(201, 169, 97, 0.32);
      --accent-bg: rgba(201, 169, 97, 0.2);
    }

    body {
      font-family: 'DM Sans', 'Inter', sans-serif;
      background: radial-gradient(circle at top, #1a1a1a 0, #050505 45%, #000 100%);
      color: #e5e5e7;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      overflow-x: hidden;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 20% 10%, rgba(201, 169, 97, 0.12) 0%, transparent 55%),
        radial-gradient(circle at 80% 90%, rgba(201, 169, 97, 0.06) 0%, transparent 45%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 2;
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      flex: 1;
    }

    /* HEADER - MATCHING ESSAY-MASTER.HTML */
    .header {
      background: rgba(28, 28, 30, 0.95);
      backdrop-filter: blur(40px);
      border-bottom: 1px solid rgba(84, 84, 88, 0.3);
      padding: 0.75rem 1.5rem;
      margin-bottom: 1rem;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      text-align: center;
    }

  .brand-logo {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 1.6rem;
  font-weight: 700;
  color: #C9A961;  /* ‚Üê ADD THIS LINE */
  text-transform: uppercase;
  letter-spacing: -0.04em;
  margin-bottom: 0.25rem;
}
    
    .brand-subtitle {
      font-size: 0.75rem;
      color: #636366;
      margin-top: 0.25rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    /* BACK BUTTON - MATCHING ESSAY-MASTER.HTML */
    .back-btn {
      position: absolute;
      top: 1rem;
      left: 1rem;
      padding: 0.4rem 0.85rem;
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 999px;
      color: #C9A961;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      z-index: 100;
      min-height: 44px;
    }

    .back-btn:hover {
      background: rgba(0, 0, 0, 0.6);
      border-color: rgba(201, 169, 97, 0.3);
      transform: translateX(-2px);
    }

    .back-btn:active {
      transform: scale(0.95);
    }

    /* MAIN CARD */
    .card {
      background: rgba(20, 20, 22, 0.85);
      backdrop-filter: blur(30px) saturate(160%);
      -webkit-backdrop-filter: blur(30px) saturate(160%);
      border-radius: 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow:
        0 20px 40px rgba(0, 0, 0, 0.9),
        inset 0 1px 0 rgba(255, 255, 255, 0.04);
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      flex: 1;
      margin-bottom: 1rem;
    }

    /* STEP INDICATOR */
    .step-indicator {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.04);
      margin-bottom: 0.5rem;
    }

    .step-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s;
    }

    .step-dot.active {
      background: var(--accent);
      border-color: var(--accent);
      box-shadow: 0 0 16px var(--accent-soft);
      transform: scale(1.4);
    }

    .step-dot.completed {
      background: rgba(16, 185, 129, 0.6);
      border-color: #10b981;
    }

    /* PRESENTATION AREA */
    .presentation-area {
      margin-top: 0.25rem;
      padding: 2rem 2rem;
      border-radius: 1.2rem;
      background: 
        linear-gradient(145deg, rgba(25, 25, 27, 0.7), rgba(15, 15, 17, 0.85));
      box-shadow: 
        inset 8px 8px 16px rgba(0, 0, 0, 0.6),
        inset -8px -8px 16px rgba(40, 40, 42, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.02);
      min-height: 380px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 1.5rem;
      text-align: center;
    }

    /* STEP TITLE */
    .step-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      margin-bottom: 0.5rem;
    }

    /* SENTENCE DISPLAY */
    .sentence-display {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      line-height: 1.4;
      color: #fef3c7;
      letter-spacing: -0.02em;
      text-shadow: 
        0 2px 20px rgba(0, 0, 0, 0.9),
        0 0 40px rgba(254, 243, 199, 0.3);
      max-width: 95%;
      margin: 0 auto;
    }

    /* HIGHLIGHT COLORS */
    .highlight-new {
      color: #10b981;
      text-shadow: 
        0 2px 20px rgba(0, 0, 0, 0.9),
        0 0 40px rgba(16, 185, 129, 0.4);
    }

    .highlight-structure {
      color: #3b82f6;
      text-shadow: 
        0 2px 20px rgba(0, 0, 0, 0.9),
        0 0 40px rgba(59, 130, 246, 0.4);
    }

    /* EXPLANATION BOX */
    .explanation {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(201, 169, 97, 0.2);
      border-radius: 0.75rem;
      padding: 1rem 1.5rem;
      margin-top: 1rem;
      max-width: 90%;
    }

    .explanation-label {
      font-size: 0.7rem;
      font-weight: 700;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 0.5rem;
    }

    .explanation-text {
      font-size: 0.9rem;
      line-height: 1.6;
      color: #e5e7eb;
    }

    /* STRUCTURE TAG */
    .structure-tag {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.4rem 0.75rem;
      border-radius: 999px;
      font-size: 0.75rem;
      background: rgba(59, 130, 246, 0.15);
      border: 1px solid rgba(59, 130, 246, 0.3);
      color: #93c5fd;
      font-weight: 600;
      margin-top: 0.5rem;
    }

    /* BOTTOM NAVIGATION */
    .bottom-nav {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 0.5rem;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .btn {
      min-height: 2.5rem;
      padding: 0 1.25rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      color: #e5e5e7;
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.4rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn:hover:not(.btn-disabled) {
      background: rgba(0, 0, 0, 0.5);
      border-color: rgba(201, 169, 97, 0.3);
      transform: translateY(-1px);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent) 0%, #fef9c3 100%);
      color: #111827;
      border-color: var(--accent);
      box-shadow: 0 3px 10px var(--accent-soft);
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, #d4b46e 0%, #fef9c3 100%);
      box-shadow: 0 4px 12px var(--accent-soft);
      transform: translateY(-2px);
    }

    .btn-disabled {
      opacity: 0.3;
      cursor: not-allowed;
      box-shadow: none;
    }

    /* MOBILE */
    @media (max-width: 768px) {
      body {
        padding: 0.4rem;
        padding-top: 0.4rem;
      }

      .container {
        padding: 0;
      }

      .back-btn {
        top: 0.4rem;
        left: 0.4rem;
        padding: 0.3rem 0.5rem;
        font-size: 0.55rem;
      }

      .header {
        padding: 0.4rem 0.6rem;
        margin-bottom: 0.5rem;
      }

      .brand-logo {
        font-size: 1rem;
        margin-bottom: 0.1rem;
      }

      .brand-subtitle {
        font-size: 0.55rem;
      }

      .card {
        padding: 0.75rem;
        gap: 0.4rem;
      }

      .presentation-area {
        padding: 1.5rem 1rem;
        min-height: 320px;
        gap: 1rem;
      }

      .sentence-display {
        font-size: 1.2rem;
      }

      .step-title {
        font-size: 0.7rem;
      }

      .explanation {
        padding: 0.75rem 1rem;
        margin-top: 0.75rem;
      }

      .explanation-text {
        font-size: 0.8rem;
      }

      .btn {
        min-height: 2.25rem;
        font-size: 0.65rem;
        padding: 0 0.85rem;
      }
    }
  </style>
</head>
<body>

<button class="back-btn" onclick="window.location.href='../../../index.html?openModal=writing&submenu=sentence-structure'">
  <span>‚Üê</span>
  <span>Back</span>
</button>

<div class="container">
  <!-- HEADER -->
  <header class="header">
    <div class="brand-logo">INTUITY</div>
    <div class="brand-subtitle">Sentence Builder</div>
  </header>

  <!-- MAIN CARD -->
  <main class="card">
    <!-- STEP INDICATOR -->
    <div class="step-indicator" id="stepIndicator">
      <!-- Dots will be generated here -->
    </div>

    <!-- PRESENTATION AREA -->
    <section class="presentation-area" id="presentationArea">
      <!-- Content will be rendered here -->
    </section>

    <!-- BOTTOM NAVIGATION -->
    <div class="bottom-nav" id="bottomNav">
      <!-- Buttons will be rendered here -->
    </div>
  </main>
</div>

<script>
// ==================== DATA ====================
const examples = [
  {
    topic: "Policy Effectiveness",
    steps: [
      {
        level: 1,
        title: "Step 1: Half Clause",
        sentence: "The new policy",
        explanation: "This is a noun phrase, not a complete thought. It leaves the reader wondering 'what about the new policy?'",
        structure: "Incomplete - Subject Only",
        status: "incomplete"
      },
      {
        level: 2,
        title: "Step 2: Simple Sentence",
        sentence: "The new policy is effective.",
        explanation: "Now we have a complete thought with subject, verb, and complement. This is grammatically complete.",
        structure: "Subject + Verb + Adjective",
        status: "complete",
        additions: ["is effective"]
      },
      {
        level: 3,
        title: "Step 3: Adding a Phrase",
        sentence: "The new policy, introduced last month, is effective.",
        explanation: "A non-defining participial phrase adds context about when the policy was introduced, making the sentence more informative.",
        structure: "Subject + Non-defining Phrase + Verb + Adjective",
        status: "enhanced",
        additions: ["introduced last month"]
      },
      {
        level: 4,
        title: "Step 4: Adding a Clause",
        sentence: "The new policy, which was introduced last month, is effective because it addresses a major issue.",
        explanation: "We've added a relative clause (which...) for more detail and a subordinate clause (because...) to explain WHY it's effective.",
        structure: "Subject + Relative Clause + Main Verb + Subordinate Clause",
        status: "complex",
        additions: ["which was", "because it addresses a major issue"]
      },
      {
        level: 5,
        title: "Step 5: Adding More Complexity",
        sentence: "The new policy, which was introduced last month after extensive consultation, is effective because it addresses a major issue that has been plaguing the industry.",
        explanation: "Additional prepositional phrases (after extensive consultation) and a relative clause (that has been...) create layers of meaning.",
        structure: "Multiple embedded clauses and phrases",
        status: "advanced",
        additions: ["after extensive consultation", "that has been plaguing the industry"]
      },
      {
        level: 6,
        title: "Step 6: Full Complex Sentence",
        sentence: "Although some critics argue that the new policy, which was introduced last month after extensive consultation, may have unintended consequences, it is effective because it addresses a major issue that has been plaguing the industry, thereby providing a much-needed solution.",
        explanation: "This complex sentence contains: a concessive clause (Although...), a relative clause (which...), multiple prepositional phrases, a main clause, subordinate clauses, and a participial phrase (thereby providing...). All elements work together to present a nuanced, well-developed idea.",
        structure: "Multi-clause complex sentence with subordination and coordination",
        status: "mastery",
        additions: ["Although some critics argue that", "may have unintended consequences", "thereby providing a much-needed solution"]
      }
    ]
  },
  {
    topic: "Environmental Conservation",
    steps: [
      {
        level: 1,
        title: "Step 1: Half Clause",
        sentence: "Renewable energy sources",
        explanation: "Just a noun phrase - it's incomplete and leaves us wondering what the sentence is trying to say.",
        structure: "Incomplete - Subject Only",
        status: "incomplete"
      },
      {
        level: 2,
        title: "Step 2: Simple Sentence",
        sentence: "Renewable energy sources reduce pollution.",
        explanation: "A complete simple sentence with subject, verb, and object. Clear and direct.",
        structure: "Subject + Verb + Object",
        status: "complete",
        additions: ["reduce pollution"]
      },
      {
        level: 3,
        title: "Step 3: Adding a Phrase",
        sentence: "Renewable energy sources, such as solar and wind power, reduce pollution.",
        explanation: "An appositive phrase provides specific examples, making the sentence more concrete and informative.",
        structure: "Subject + Appositive + Verb + Object",
        status: "enhanced",
        additions: ["such as solar and wind power"]
      },
      {
        level: 4,
        title: "Step 4: Adding a Clause",
        sentence: "Renewable energy sources, such as solar and wind power, reduce pollution because they produce no harmful emissions.",
        explanation: "A subordinate clause (because...) explains the reason, adding logical connection to the sentence.",
        structure: "Subject + Appositive + Verb + Object + Subordinate Clause",
        status: "complex",
        additions: ["because they produce no harmful emissions"]
      },
      {
        level: 5,
        title: "Step 5: Adding More Complexity",
        sentence: "Renewable energy sources, such as solar and wind power, which have become increasingly affordable, reduce pollution because they produce no harmful emissions while generating electricity.",
        explanation: "A relative clause (which have become...) and a participial phrase (while generating...) add multiple layers of information.",
        structure: "Multiple embedded clauses with coordination",
        status: "advanced",
        additions: ["which have become increasingly affordable", "while generating electricity"]
      },
      {
        level: 6,
        title: "Step 6: Full Complex Sentence",
        sentence: "Although initial costs can be high, renewable energy sources, such as solar and wind power, which have become increasingly affordable in recent years, reduce pollution because they produce no harmful emissions while generating electricity, thereby offering a sustainable alternative to fossil fuels that governments worldwide are now embracing.",
        explanation: "This sophisticated sentence combines: a concessive clause (Although...), appositive phrase, relative clause, subordinate clause, participial phrases, and a final relative clause. It presents a complete argument with acknowledgment of counter-arguments.",
        structure: "Multi-layered complex sentence with multiple subordination levels",
        status: "mastery",
        additions: ["Although initial costs can be high", "in recent years", "thereby offering a sustainable alternative to fossil fuels that governments worldwide are now embracing"]
      }
    ]
  },
  {
    topic: "Educational Technology",
    steps: [
      {
        level: 1,
        title: "Step 1: Half Clause",
        sentence: "Digital learning platforms",
        explanation: "An incomplete noun phrase that doesn't express a complete idea.",
        structure: "Incomplete - Subject Only",
        status: "incomplete"
      },
      {
        level: 2,
        title: "Step 2: Simple Sentence",
        sentence: "Digital learning platforms improve education.",
        explanation: "A basic complete sentence with subject, verb, and object.",
        structure: "Subject + Verb + Object",
        status: "complete",
        additions: ["improve education"]
      },
      {
        level: 3,
        title: "Step 3: Adding a Phrase",
        sentence: "Digital learning platforms, used by millions of students, improve education.",
        explanation: "A participial phrase adds information about how widespread these platforms are.",
        structure: "Subject + Participial Phrase + Verb + Object",
        status: "enhanced",
        additions: ["used by millions of students"]
      },
      {
        level: 4,
        title: "Step 4: Adding a Clause",
        sentence: "Digital learning platforms, used by millions of students, improve education because they provide personalized learning experiences.",
        explanation: "Adding a causal clause (because...) explains why they improve education.",
        structure: "Subject + Participial Phrase + Verb + Object + Causal Clause",
        status: "complex",
        additions: ["because they provide personalized learning experiences"]
      },
      {
        level: 5,
        title: "Step 5: Adding More Complexity",
        sentence: "Digital learning platforms, used by millions of students worldwide, improve education because they provide personalized learning experiences that adapt to individual needs and learning speeds.",
        explanation: "Additional details (worldwide) and a relative clause (that adapt...) enrich the meaning.",
        structure: "Multiple embedded clauses and phrases",
        status: "advanced",
        additions: ["worldwide", "that adapt to individual needs and learning speeds"]
      },
      {
        level: 6,
        title: "Step 6: Full Complex Sentence",
        sentence: "While some educators worry about screen time, digital learning platforms, used by millions of students worldwide, improve education because they provide personalized learning experiences that adapt to individual needs and learning speeds, enabling teachers to track progress more effectively and intervene when students struggle.",
        explanation: "This complex sentence includes: a concessive clause (While...), participial phrases, subordinate clauses, relative clauses, and additional participial phrases that show consequence. It presents multiple interconnected ideas in one coherent statement.",
        structure: "Advanced multi-clause sentence with parallel structures",
        status: "mastery",
        additions: ["While some educators worry about screen time", "enabling teachers to track progress more effectively and intervene when students struggle"]
      }
    ]
  }
];

// ==================== STATE ====================
let currentExampleIndex = 0;
let currentStep = 0;

// ==================== FUNCTIONS ====================
function getCurrentExample() {
  return examples[currentExampleIndex];
}

function getCurrentStepData() {
  return getCurrentExample().steps[currentStep];
}

function renderStepIndicator() {
  const indicator = document.getElementById('stepIndicator');
  const example = getCurrentExample();
  
  indicator.innerHTML = example.steps.map((step, index) => {
    let className = 'step-dot';
    if (index === currentStep) className += ' active';
    else if (index < currentStep) className += ' completed';
    
    return `<div class="${className}" onclick="goToStep(${index})"></div>`;
  }).join('');
}

function highlightAdditions(sentence, additions) {
  if (!additions || additions.length === 0) return sentence;
  
  let highlighted = sentence;
  additions.forEach(addition => {
    const regex = new RegExp(`(${addition.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
    highlighted = highlighted.replace(regex, '<span class="highlight-new">$1</span>');
  });
  
  return highlighted;
}

function renderContent() {
  const area = document.getElementById('presentationArea');
  const stepData = getCurrentStepData();
  
  const highlightedSentence = currentStep > 0 
    ? highlightAdditions(stepData.sentence, stepData.additions) 
    : stepData.sentence;
  
  const statusColors = {
    incomplete: '#ef4444',
    complete: '#10b981',
    enhanced: '#3b82f6',
    complex: '#8b5cf6',
    advanced: '#ec4899',
    mastery: '#f59e0b'
  };
  
  area.innerHTML = `
    <div>
      <div class="step-title">${stepData.title}</div>
      <div class="sentence-display">${highlightedSentence}</div>
      
      ${stepData.structure ? `
        <div class="structure-tag">
          <span>üìê</span>
          <span>${stepData.structure}</span>
        </div>
      ` : ''}
      
      <div class="explanation">
        <div class="explanation-label">Why This Works</div>
        <div class="explanation-text">${stepData.explanation}</div>
      </div>
    </div>
  `;
}

function renderBottomNav() {
  const nav = document.getElementById('bottomNav');
  const isFirstStep = currentStep === 0;
  const isLastStep = currentStep === getCurrentExample().steps.length - 1;
  
  nav.innerHTML = `
    <button class="btn ${isFirstStep ? 'btn-disabled' : ''}" onclick="previousStep()">
      <span>‚Üê</span>
      <span>Previous</span>
    </button>
    
    <button class="btn" onclick="copyText()">
      <span>üìã</span>
      <span>Copy</span>
    </button>
    
    <button class="btn btn-primary" onclick="nextExample()">
      <span>üîÑ</span>
      <span>New Example</span>
    </button>
    
    <button class="btn ${isLastStep ? 'btn-disabled' : ''}" onclick="nextStep()">
      <span>Next</span>
      <span>‚Üí</span>
    </button>
  `;
}

function render() {
  renderStepIndicator();
  renderContent();
  renderBottomNav();
}

// ==================== NAVIGATION ====================
function nextStep() {
  const example = getCurrentExample();
  if (currentStep < example.steps.length - 1) {
    currentStep++;
    render();
  }
}

function previousStep() {
  if (currentStep > 0) {
    currentStep--;
    render();
  }
}

function goToStep(stepIndex) {
  currentStep = stepIndex;
  render();
}

function nextExample() {
  currentExampleIndex = (currentExampleIndex + 1) % examples.length;
  currentStep = 0;
  render();
}

function copyText() {
  const stepData = getCurrentStepData();
  const textToCopy = stepData.sentence;
  
  navigator.clipboard.writeText(textToCopy).then(() => {
    // Optional: show brief success message
    console.log('Copied to clipboard');
  }).catch(err => {
    console.error('Failed to copy:', err);
  });
}

// ==================== KEYBOARD NAVIGATION ====================
document.addEventListener('keydown', (e) => {
  if (e.key === 'ArrowRight') nextStep();
  if (e.key === 'ArrowLeft') previousStep();
  if (e.key === 'Enter') nextExample();
});

// ==================== INITIALIZE ====================
render();
</script>
</body>
</html>
